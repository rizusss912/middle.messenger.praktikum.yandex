{"version":3,"sources":["../node_modules/regenerator-runtime/runtime.js","utils/observeble/subject.ts","utils/observeble/subscription.ts","utils/observeble/observeble.ts","utils/templator/renderer.ts","utils/templator/html-element-renderer.ts","utils/templator/html-elements-render-manager.ts","utils/templator/text-node-renderer.ts","utils/templator/text-nodes-render-manager.ts","utils/templator/templator.ts","utils/component.ts","app-root.tmpl.ts","pages/main/page-main.tmpl.ts","service/router/pages.config.ts","store/enums/data-status.enum.ts","store/selectors/data/select-status.ts","store/selectors/authorization/select-auth-token.ts","store/selectors/authorization/select-is-authorized.ts","store/functions/get-default-data.ts","store/consts/default-state.const.ts","store/enums/active-chats-actions.ts","store/functions/reduser-adaptor.ts","store/reducers/active-chats-state.reducers.ts","store/enums/authorization-action-type.enum.ts","store/reducers/authorization-reducers.ts","utils/data-reducers-helper.ts","store/enums/chats-action-type.enum.ts","store/reducers/chats-reducers.ts","store/enums/user-action-type.enum.ts","store/reducers/user-reducers.ts","store/reducers/reducer.ts","store/store.ts","guards/auth-guard.ts","store/actions/authorization.actions.ts","store/selectors/authorization/select-user-data.ts","interceptor/auth-interceptor.ts","utils/api/http-method.ts","utils/api/http-client.ts","utils/api/http-client-module.ts","service/api/modules/auth-http-client-module.ts","service/api/modules/chats-http-client-module.ts","service/api/modules/user-http-client-module.ts","service/api/http-client.facade.ts","service/auth.service.ts","pages/main/service/main-page-manager.ts","pages/main/page-main.ts","pages/auth/page-auth.tmpl.ts","utils/animation/animation-utils/transform.functions.ts","utils/animation/animations/shaking-animation.ts","utils/form/form-control.ts","utils/form/form-group.ts","utils/form/validator-error.ts","utils/form/validators.ts","const/form-validators.ts","components/input/app-input.tmpl.ts","utils/animation/animation-utils/play-animation.ts","components/input/app-input.ts","components/form/app-form.tmpl.ts","components/form/app-form.ts","components/button/app-button.tmpl.ts","components/button/app-button.ts","pages/auth/enums/auth-page-type.enum.ts","pages/auth/services/auth-page-manager.ts","pages/auth/enums/form-title.enum.ts","pages/auth/page-auth.ts","pages/profile/page-profile.tmpl.ts","pages/profile/components/user-data/user-data.tmpl.ts","utils/functions/hide-element.ts","utils/animation/configs/visibility.config.ts","utils/animation/animations/hide-animation.ts","utils/animation/animations/show-animation.ts","pages/profile/elements/profile-content.ts","store/actions/user.actions.ts","service/user.service.ts","store/selectors/data/select-data-value.ts","pages/profile/enums/profile-page-form-type.enum.ts","pages/profile/service/profile-page-manager.ts","pages/profile/components/user-data/user-data.ts","pages/profile/components/form-user-data/form-user-data.tmpl.ts","pages/profile/components/form-user-data/form-user-data.ts","pages/profile/components/form-password/form-password.tmpl.ts","pages/profile/components/form-password/form-password.ts","pages/profile/page-profile.ts","pages/default/consts/default-description.const.ts","pages/default/page-default.tmpl.ts","pages/default/page-default.ts","service/router/router.config.ts","service/router/router.service.ts","app-root.ts","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","document","querySelectorAll","i","length","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","overlay","createErrorOverlay","body","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"app-root.8d0640f3.js","sourceRoot":"../src","sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import {ChainPromiseValue} from './chain-promise';\nimport {Observable} from './observeble';\n\ntype DeferPromise<T, Error> = {\n    promise: Promise<T>,\n    resolve: (value: T) => void,\n    reject: (error: Error) => void,\n};\n\nfunction deferPromise<T, Error>(): DeferPromise<T, Error> {\n\tlet resolvingFunctions: Omit<DeferPromise<T, Error>, 'promise'>;\n\tconst promise = new Promise<T>((resolve, reject) => {\n\t\tresolvingFunctions = {resolve, reject};\n\t});\n\t// @ts-ignore\n\treturn {promise, ...resolvingFunctions};\n}\n\nexport class Subject<T> {\n    private _value: T | undefined;\n    private hasValue: boolean;\n    private deferPromise: DeferPromise<ChainPromiseValue<T>, Error>;\n\n    constructor(value?: T) {\n    \tthis.hasValue = arguments.length > 0;\n\n    \tif (this.hasValue) {\n    \t\tthis._value = value;\n    \t}\n\n    \tthis.deferPromise = deferPromise<ChainPromiseValue<T>, Error>();\n    }\n\n    public next(value: T) {\n    \tconst nextdeferPromise = deferPromise<ChainPromiseValue<T>, Error>();\n\n    \tthis._value = value;\n    \tthis.hasValue = true;\n    \tthis.deferPromise.resolve({value: this._value, next: nextdeferPromise.promise});\n    \tthis.deferPromise = nextdeferPromise;\n    }\n\n    public asObserveble() {\n    \tif (this.hasValue) {\n    \t\treturn new Observable(this.deferPromise.promise, this._value);\n    \t}\n\n    \treturn new Observable(this.deferPromise.promise);\n    }\n}\n","export class Subscription<T> {\n    private readonly onUnsubscribe: (subscription: Subscription<T>) => void;\n\n    constructor(onUnsubscribe: (subscription: Subscription<T>) => void) {\n    \tthis.onUnsubscribe = onUnsubscribe;\n    }\n\n    unsubscribe(): void {\n    \tthis.onUnsubscribe(this);\n    }\n}\n","import {ChainPromise, ChainPromiseValue} from './chain-promise';\nimport {Subject} from './subject';\nimport {Subscription} from './subscription';\n\nexport class Observable<T> {\n    private readonly subscriptionMap = new Map<Subscription<T>, (value: T) => void>();\n    private _value: T;\n    private hasValue: boolean = false;\n    private promise: ChainPromise<T>;\n\n    constructor(chainPromise: ChainPromise<T>, value?: T) {\n    \tif (arguments.length > 1) {\n    \t\tthis._value = value as T;\n    \t\tthis.hasValue = true;\n    \t}\n\n    \tthis.promise = chainPromise;\n    \tchainPromise.then(value => this.onNext(value));\n    }\n\n    public static all<T>(observebles: Observable<T>[]): Observable<T[]> {\n    \treturn Observable.combine(observebles, true) as Observable<T[]>;\n    }\n\n    public static concat<T>(observebles: Observable<T>[]): Observable<(T | undefined)[]> {\n    \treturn Observable.combine(observebles, false);\n    }\n\n    public static event(\n    \telement: HTMLElement | Window & typeof globalThis,\n    \teventName: string,\n    ): Observable<Event> {\n    \tconst emitter: Subject<Event> = new Subject<Event>();\n\n    \telement.addEventListener(eventName, (e: Event) => emitter.next(e));\n\n    \treturn emitter.asObserveble();\n    }\n\n    public subscribe(handler: (value: T) => void): Subscription<T> {\n    \tconst subscription = new Subscription(this.getUnsubscribeFunction(this.subscriptionMap));\n\n    \tthis.subscriptionMap.set(subscription, handler);\n    \t// Т.к. следующее значение может быть и undefined, используем hasValue\n    \tif (this.hasValue) {\n    \t\thandler(this._value);\n    \t}\n\n    \treturn subscription;\n    }\n\n    public map<R>(handler: (value: T) => R): Observable<R> {\n    \tfunction mapPromise(promise: ChainPromise<T>): ChainPromise<R> {\n    \t\treturn promise.then(chain => ({\n    \t\t\tvalue: handler(chain.value),\n    \t\t\tnext: mapPromise(chain.next),\n    \t\t}));\n    \t}\n\n    \tif (this.hasValue) {\n    \t\treturn new Observable<R>(mapPromise(this.promise), handler(this._value));\n    \t}\n\n    \treturn new Observable<R>(mapPromise(this.promise));\n    }\n\n    public filter(handler: (value: T) => boolean): Observable<T> {\n    \tfunction filterPromise(promise: ChainPromise<T>): ChainPromise<T> {\n    \t\treturn promise.then(chain => {\n    \t\t\tif (handler(chain.value)) {\n    \t\t\t\treturn {\n    \t\t\t\t\tvalue: chain.value,\n    \t\t\t\t\tnext: filterPromise(chain.next),\n    \t\t\t\t};\n    \t\t\t}\n\n    \t\t\treturn filterPromise(chain.next);\n    \t\t});\n    \t}\n\n    \tif (this.hasValue && handler(this._value)) {\n    \t\treturn new Observable<T>(filterPromise(this.promise), this._value);\n    \t}\n\n    \treturn new Observable<T>(filterPromise(this.promise));\n    }\n\n    public on(handler: (value: T) => void): Observable<T> {\n    \tfunction onPromise(promise: ChainPromise<T>): ChainPromise<T> {\n    \t\treturn promise.then(chain => {\n    \t\t\thandler(chain.value);\n\n    \t\t\treturn {\n    \t\t\t\tvalue: chain.value,\n    \t\t\t\tnext: onPromise(chain.next),\n    \t\t\t};\n    \t\t});\n    \t}\n\n    \tif (this._value) {\n    \t\thandler(this._value);\n    \t}\n\n    \tif (this.hasValue) {\n    \t\treturn new Observable<T>(onPromise(this.promise), this._value);\n    \t}\n\n    \treturn new Observable<T>(onPromise(this.promise));\n    }\n\n    public startWith(value: T): Observable<T> {\n    \treturn new Observable<T>(this.promise, value);\n    }\n\n    public uniqueNext(\n    \tapproveFirst = true,\n    \tcheckUnicue: (last: T, next: T) => boolean =\n    \t(last, next) => last !== next || (!this.hasValue && approveFirst),\n    ): Observable<T> {\n    \tlet last: T = this._value;\n    \tlet firstAppruved = false;\n\n    \treturn this.filter(value => (!firstAppruved) || checkUnicue!(last, value!))\n    \t\t.on(() => {\n    \t\t\tfirstAppruved = true;\n    \t\t})\n    \t\t.on(value => {\n    \t\t\tlast = value!;\n    \t\t});\n    }\n\n    public only(count: number): Observable<T> {\n    \tconst emptyPromise: ChainPromise<T> = new Promise(() => {});\n\n    \tif (this.hasValue) {\n    \t\treturn new Observable<T>(count ? this.promise : emptyPromise, this._value)\n    \t\t\t.filter(() => count-- > 0);\n    \t}\n\n    \treturn new Observable<T>(count ? this.promise : emptyPromise)\n    \t\t.filter(() => count-- > 0);\n    }\n\n    public select<R>(selector: (value: T) => R): Observable<R> {\n    \treturn this.map(selector).uniqueNext();\n    }\n\n    private static combine<T>(\n    \tobservebles: Observable<T>[], waitAll: boolean): Observable<(T | undefined)[]> {\n    \tconst subject: Subject<(T | undefined)[]> = new Subject<(T | undefined)[]>();\n    \tconst values: (T | undefined)[] = Array(observebles.length).fill(undefined);\n    \tconst hasValues: boolean[] = Array(observebles.length).fill(false);\n    \tlet hasAllValues: boolean = false;\n\n    \tconst subscribeobserveble = (observeble: Observable<T>, index: number): void => {\n    \t\tobserveble.subscribe(value => {\n    \t\t\tvalues[index] = value;\n\n    \t\t\tif (hasAllValues || !waitAll) {\n    \t\t\t\tsubject.next(values.slice());\n    \t\t\t} else {\n    \t\t\t\thasValues[index] = true;\n    \t\t\t\thasAllValues = hasValues.every(has => has);\n\n    \t\t\t\tif (hasAllValues) {\n    \t\t\t\t\tsubject.next(values.slice());\n    \t\t\t\t}\n    \t\t\t}\n    \t\t});\n    \t};\n\n    \tfor (let index = 0; index < observebles.length; index++) {\n    \t\tsubscribeobserveble(observebles[index], index);\n    \t}\n\n    \treturn subject.asObserveble();\n    }\n\n    private onNext(value: ChainPromiseValue<T>): void {\n    \tif (!value) {\n    \t\tthis.onFinish();\n\n    \t\treturn;\n    \t}\n\n    \tthis._value = value.value;\n    \tthis.hasValue = true;\n    \tthis.emitValue(value.value);\n    \tthis.promise = value.next;\n    \tvalue.next.then(value => this.onNext(value));\n    }\n\n    private emitValue(value: T): void {\n    \tfor (const handler of this.subscriptionMap.values()) {\n    \t\thandler(value);\n    \t}\n    }\n\n    private onFinish(): void {\n    \tthis.subscriptionMap.clear();\n    }\n\n    private getUnsubscribeFunction(\n    \tmap: Map<Subscription<T>, (value: T) => void>): (subscription: Subscription<T>) => void {\n    \treturn function (subscription: Subscription<T>): void {\n    \t\tif (map.has(subscription)) {\n    \t\t\tmap.delete(subscription);\n    \t\t}\n    \t};\n    }\n}\n","import {Observable} from '../observeble/observeble';\nimport {Subject} from '../observeble/subject';\nimport {Subscription} from '../observeble/subscription';\n\nexport class Renderer<Context extends object, value> {\n    protected readonly context: Context;\n    protected readonly $staticValues: Subject<value[]> = new Subject<value[]>();\n    protected subscription: Subscription<value[]> | undefined;\n\n    constructor(context: Context) {\n    \tthis.context = context;\n    }\n\n    protected getFieldValue(fieldName: string): unknown {\n    \tlet out = this.context;\n\n    \tfor (const field of fieldName.split('.')) {\n    \t\tif (field in out) {\n    \t\t\t// @ts-ignore\n    \t\t\tout = out[field];\n    \t\t} else {\n    \t\t\t// Только так мы можем понять что поле отсутствует\n    \t\t\t// Любой корректный выход из этой функции считается найденным значением\n    \t\t\tthrow new Error(`field ${fieldName} not found`);\n    \t\t}\n    \t}\n\n    \treturn out;\n    }\n\n    protected needSelectValueInObservable(fieldName: string): boolean {\n    \tconst fieldPath = fieldName.split('.');\n\n    \treturn fieldPath.length > 1\n\t\t\t&& fieldPath[0].length > 0\n\t\t\t&& this.firstFieldIsObservable(fieldName);\n    }\n\n    protected firstFieldIsObservable(fieldName: string): boolean {\n    \treturn this.getFirstFieldByFieldName(fieldName) instanceof Observable;\n    }\n\n    protected getSelectedObservable<contextValue>(fieldName: string): Observable<contextValue> {\n    \tif (!this.firstFieldIsObservable(fieldName)) {\n    \t\tthrow new Error(`first field is not observable: ${fieldName}`);\n    \t}\n\n    \treturn (this.getFirstFieldByFieldName(fieldName) as Observable<contextValue>)\n    \t\t.select<contextValue>(this.createSelectorByFieldName(fieldName));\n    }\n\n    protected initObserveblesSubscription(\n    \tobservebles: Observable<value>[],\n    \tonValuesChanged: (value?: value[]) => void,\n    ): Subscription<value> {\n    \tif (this.subscription) {\n    \t\tthis.subscription.unsubscribe();\n    \t}\n\n    \tthis.subscription = this.getObservable(observebles).subscribe(onValuesChanged);\n\n    \treturn this.subscription;\n    }\n\n    // TODO: Изменить реализацию метода, когда появится метод merge у Observeble\n    protected getObservable(observebles: Observable<value>[]): Observable<value[]> {\n    \t// Тут проблема с типами из-за костыльной реализации метода\n    \t// метод merge должен решить эту проблему\n    \treturn Observable.all<value | value[]>(\n    \t\t[\n\t\t\t\tthis.$staticValues.asObserveble() as Observable<value | value[]>,\n\t\t\t\t...observebles as Observable<value | value[]>[],\n    \t\t],\n    \t)\n    \t\t.map(data => data.length > 1\n    \t\t\t? (data[0] as value[]).concat(data.slice(1, data.length) as value[])\n    \t\t\t: data[0] as value[],\n    \t\t);\n    }\n\n    protected mapTemplateToField(template: string): string {\n    \treturn template.replace(/[\\s{}()[\\]]+/gim, '');\n    }\n\n    private getFirstFieldByFieldName(fieldName: string): unknown {\n    \t// @ts-ignore\n    \treturn this.context[fieldName.split('.')[0]];\n    }\n\n    private createSelectorByFieldName<contextValue>(\n    \tfieldName: string,\n    ): (value: contextValue) => contextValue {\n    \tconst fieldPath = fieldName.split('.');\n\n    \tfieldPath.shift();\n\n    \treturn function (value: contextValue): contextValue {\n    \t\tlet out = value;\n\n    \t\tfor (const fieldName of fieldPath) {\n    \t\t\tif (typeof out !== 'object') {\n    \t\t\t\tthrow new Error(`Templator: invalid selector (${fieldName}) or observeble value`);\n    \t\t\t}\n\n    \t\t\t// @ts-ignore\n    \t\t\tout = out[fieldName];\n    \t\t}\n\n    \t\treturn out;\n    \t};\n    }\n}\n","import {Observable} from '../observeble/observeble';\nimport {Renderer} from './renderer';\n\ninterface Attribute {\n    name: string;\n    value?: string;\n}\n\ninterface CustomAttribute {\n    name: string;\n    value: unknown;\n    valueTemplate: string;\n}\n\ninterface Conponent extends HTMLElement {\n    inject: (name: string, value: unknown) => void;\n}\n\n/**\n * Разбивает тег на массив атрибутов. Пример:\n * <div name={{name}} click={{handler()}} type=\"test\" hidden> =>\n * ['<div', 'name={{name}}', 'click={{handler()}}', 'type=\"test\"', 'hidden']\n */\n\n// TODO: не может читать значение атрибута с пробелом\nconst TEG_ATTRIBUTES = /([(<|</)\\w\\-@]+(?:=)?(?:\"|'|\\{\\{|\\}\\}|\\]\\]|\\[\\[)?[\\w\\-|(|)|.|$]+(?:\"|'|\\{\\{|\\}\\}|\\]\\]|\\[\\[])?)/gim;\n\nexport class HTMLElementRenderer\n<Context extends object> extends Renderer<Context, CustomAttribute> {\n    public readonly element: Conponent | HTMLElement;\n\n    private readonly customAttributes: Map<string, string> = new Map<string, string>();\n    private readonly eventListenersMap: Map<string, Function[]> = new Map<string, Function[]>();\n\n    constructor(tagStr: string, context: Context) {\n    \tsuper(context);\n\n    \tconst tagArr = tagStr.match(TEG_ATTRIBUTES) || [];\n    \tconst tagName = tagArr[0].replace(/</g, '');\n    \tconst tagAttributeStrs = tagArr.splice(1);\n\n    \tthis.element = document.createElement(tagName);\n\n    \tfor (const attributeStr of tagAttributeStrs) {\n    \t\tconst attribute: Attribute = this.mapStrToAttribute(attributeStr);\n\n    \t\tif (this.isCustomAttribute(attribute)) {\n    \t\t\tthis.customAttributes.set(attribute.name, attribute.value!);\n    \t\t\t// @ts-ignore\n    \t\t} else if (this.isInjectableAttribute(attribute) && this.element.inject) {\n    \t\t\tthis.injectAttribute(attribute);\n    \t\t} else {\n    \t\t\tthis.element.setAttribute(\n    \t\t\t\tattribute.name,\n    \t\t\t\tthis.mapAttributeValueToValue(attribute.value)!,\n    \t\t\t);\n    \t\t}\n    \t}\n    }\n\n    public render(): void {\n    \tconst observebles: Observable<CustomAttribute>[] = [];\n    \tconst staticValues: CustomAttribute[] = [];\n\n    \tfor (const customAttributeEntries of this.customAttributes.entries()) {\n    \t\ttry {\n    \t\t\tconst value = this.getFieldValue(\n    \t\t\t\tthis.mapTemplateToField(customAttributeEntries[1]));\n    \t\t\tconst customAttribute = {\n    \t\t\t\tname: customAttributeEntries[0],\n    \t\t\t\tvalueTemplate: customAttributeEntries[1],\n    \t\t\t};\n\n    \t\t\tif (value instanceof Observable) {\n    \t\t\t\tthis.addObservable(\n    \t\t\t\t\tobservebles,\n    \t\t\t\t\tvalue,\n    \t\t\t\t\tcustomAttribute.name,\n    \t\t\t\t\tcustomAttribute.valueTemplate,\n    \t\t\t\t);\n    \t\t\t} else {\n    \t\t\t\tstaticValues.push({...customAttribute, value});\n    \t\t\t}\n    \t\t} catch (e) {\n    \t\t\tconsole.error(`Error when rendering attribute in ${this.element.tagName} HTMLElement: ${e}`);\n    \t\t}\n    \t}\n\n    \tif (!this.subscription) {\n    \t\tthis.initObserveblesSubscription(observebles, values => this.onValuesChanged(values!));\n    \t}\n\n    \tthis.$staticValues.next(staticValues);\n    }\n\n    private onValuesChanged(values: CustomAttribute[]): void {\n    \tfor (const value of values) {\n    \t\tthis.onValueChanged(value);\n    \t}\n    }\n\n    private onValueChanged(attribute: CustomAttribute): void {\n    \tif (attribute.name[0] === '@') {\n    \t\tif (typeof attribute.value !== 'function') {\n    \t\t\tthrow new Error(`HTMLElementRenderer: ${attribute.name} is not a function`);\n    \t\t}\n\n    \t\tif (\n    \t\t\tthis.eventListenersMap.has(attribute.name)\n                && this.eventListenersMap.get(attribute.name)!.includes(attribute.value as Function)\n    \t\t) {\n    \t\t\treturn;\n    \t\t}\n\n    \t\tif (this.eventListenersMap.has(attribute.name)) {\n    \t\t\tthis.eventListenersMap.get(attribute.name)!.push(attribute.value);\n    \t\t} else {\n    \t\t\tthis.eventListenersMap.set(attribute.name, [attribute.value]);\n    \t\t}\n\n    \t\tconst name = attribute.name.slice(1);\n\n    \t\tthis.element.addEventListener(name, e => (attribute.value as Function)\n    \t\t\t.call(this.context, e));\n\n    \t\treturn;\n    \t}\n\n    \tswitch (typeof attribute.value) {\n    \t\tcase 'function':\n    \t\t\tthis.element.setAttribute(attribute.name, String(attribute.value()));\n    \t\t\tbreak;\n    \t\tcase 'string':\n    \t\t\tthis.element.setAttribute(attribute.name, attribute.value);\n    \t\t\tbreak;\n    \t\tcase 'boolean':\n    \t\t\tif (attribute.value) {\n    \t\t\t\tif (!this.element.hasAttribute(attribute.name)) {\n    \t\t\t\t\tthis.element.setAttribute(attribute.name, '');\n    \t\t\t\t}\n    \t\t\t} else {\n    \t\t\t\tthis.element.removeAttribute(attribute.name);\n    \t\t\t}\n\n    \t\t\tbreak;\n    \t\tdefault:\n    \t\t\tthis.element.setAttribute(attribute.name, String(attribute.value));\n    \t\t\tbreak;\n    \t}\n    }\n\n    private injectAttribute(attribute: Attribute): void {\n    \ttry {\n    \t\tconst value = this.getFieldValue(this.mapTemplateToField(attribute.value!));\n    \t\t// @ts-ignore\n    \t\tthis.element.inject(attribute.name, value);\n    \t} catch (e) {\n    \t\tconsole.error(`Error when inject in ${this.element.tagName} HTMLElement: ${e}`);\n    \t}\n    }\n\n    private addObservable(\n    \tobservebles: Observable<CustomAttribute>[],\n    \tobserveble: Observable<unknown>,\n    \tname: string,\n    \tvalueTemplate: string,\n    ) {\n    \tobservebles.push(\n    \t\tobserveble.map(value => ({name, value, valueTemplate})),\n    \t);\n    }\n\n    private mapStrToAttribute(str: string): Attribute {\n    \tconst strArr = str.split('=');\n\n    \treturn strArr.length > 1\n    \t\t? {name: strArr[0], value: strArr[1]}\n    \t\t: {name: strArr[0]};\n    }\n\n    private mapAttributeValueToValue(template: string | undefined): string | undefined {\n    \tif (!template) {\n    \t\treturn;\n    \t}\n\n    \treturn String(template).replace(/['\"]+/g, '');\n    }\n\n    private isCustomAttribute(attribute: Attribute): boolean {\n    \tif (!attribute.value) {\n    \t\treturn false;\n    \t}\n\n    \treturn /[{]{2}(.+)[}]{2}/.test(String(attribute.value));\n    }\n\n    private isInjectableAttribute(attribute: Attribute): boolean {\n    \tif (!attribute.value) {\n    \t\treturn false;\n    \t}\n\n    \treturn /[[]{2}(.+)[\\]]{2}/.test(String(attribute.value));\n    }\n}\n","import {HTMLElementRenderer} from './html-element-renderer';\n\nexport class HTMLElementsRenderManager<Context extends object> {\n    private readonly context: Context;\n    private readonly renderers: HTMLElementRenderer<Context>[] = [];\n\n    constructor(context: Context) {\n    \tthis.context = context;\n    }\n\n    public initNode(tagStr: string): HTMLElement {\n    \tconst elementRenderer = new HTMLElementRenderer<Context>(tagStr, this.context);\n\n    \tthis.renderers.push(elementRenderer);\n\n    \treturn elementRenderer.element;\n    }\n\n    public renderAll(): void {\n    \tfor (const elementRenderer of this.renderers) {\n    \t\telementRenderer.render();\n    \t}\n    }\n}\n","import {Observable} from '../observeble/observeble';\nimport {Renderer} from './renderer';\n\n/**\n* Шаблон для поиска вставляемого элемента\n* 'server has bin started on port {{PORT}}' => ['{{PORT}}']\n*/\nconst VARIEBLES = /[{]{2}[\\s]*[^\\s]+[\\s]*[}]{2}/g;\n\ntype contextValue = {\n    tempate: string;\n    value: unknown;\n}\n\nexport class TextNodeRenderer<Context extends object> extends Renderer<Context, contextValue> {\n    public readonly node: Text;\n\n    private readonly content: string;\n    private readonly variablesNames: Map<string, string>;\n\n    constructor(content: string, context: Context) {\n    \tsuper(context);\n\n    \tthis.content = content;\n    \tthis.node = document.createTextNode(content);\n    \tthis.variablesNames = this.getFieldsNamesFromContent(this.content);\n    }\n\n    public render(): void {\n    \tconst observebles: Observable<contextValue>[] = [];\n    \tconst staticValues: contextValue[] = [];\n\n    \tfor (const [fieldTemplate, fieldName] of this.variablesNames.entries()) {\n    \t\ttry {\n    \t\t\tif (this.needSelectValueInObservable(fieldName)) {\n    \t\t\t\tthis.addObservable(\n    \t\t\t\t\tobservebles,\n    \t\t\t\t\tfieldTemplate,\n    \t\t\t\t\tthis.getSelectedObservable<contextValue>(fieldName),\n    \t\t\t\t);\n    \t\t\t} else {\n    \t\t\t\tlet fieldValue = this.getFieldValue(fieldName);\n\n    \t\t\t\tif (typeof fieldValue === 'function') {\n    \t\t\t\t\tfieldValue = fieldValue.call(this.context);\n    \t\t\t\t}\n\n    \t\t\t\tif (fieldValue instanceof Observable) {\n    \t\t\t\t\tthis.addObservable(observebles, fieldTemplate, fieldValue);\n    \t\t\t\t} else {\n    \t\t\t\t\tstaticValues.push({tempate: fieldTemplate, value: fieldValue});\n    \t\t\t\t}\n    \t\t\t}\n    \t\t} catch (e) {\n    \t\t\tconsole.error(`Error when rendering text: ${e}`);\n    \t\t}\n    \t}\n\n    \tif (!this.subscription) {\n    \t\tthis.initObserveblesSubscription(\n    \t\t\tobservebles,\n    \t\t\tvalues => this.onValuesChanged(values as contextValue[]),\n    \t\t);\n    \t}\n\n    \tthis.$staticValues.next(staticValues);\n    }\n\n    private getFieldsNamesFromContent(text: string): Map<string, string> {\n    \treturn new Map(\n    \t\t[...new Set<string>(text.match(VARIEBLES) || [])]\n    \t\t\t.map(fieldTemplate => [fieldTemplate, this.mapTemplateToField(fieldTemplate)]),\n    \t);\n    }\n\n    private addObservable(\n    \tobservebles: Observable<contextValue>[],\n    \tfieldTemplate: string,\n    \tfieldValue: Observable<contextValue>,\n    ): void {\n    \tobservebles.push(\n    \t\tfieldValue.map(value => ({tempate: fieldTemplate, value} as contextValue)),\n    \t);\n    }\n\n    private onValuesChanged(values: contextValue[]): void {\n    \tlet {content} = this;\n\n    \tfor (const value of values) {\n    \t\tswitch (typeof value.value) {\n    \t\t\tcase 'function':\n    \t\t\t\tcontent = content.replaceAll(value.tempate, value.value.call(this.context));\n    \t\t\t\tbreak;\n    \t\t\tdefault:\n    \t\t\t\tcontent = content.replaceAll(value.tempate, String(value.value));\n    \t\t}\n    \t}\n\n    \tthis.node.textContent = content.trim();\n    }\n}\n","import {TextNodeRenderer} from './text-node-renderer';\n\nexport class TextNodesRenderManager<Context extends object> {\n    private readonly context: Context;\n    private readonly renderers: TextNodeRenderer<Context>[] = [];\n\n    constructor(context: Context) {\n    \tthis.context = context;\n    }\n\n    public initTextNode(content: string): Text {\n    \tconst renderer = new TextNodeRenderer<Context>(content, this.context);\n\n    \tthis.renderers.push(renderer);\n\n    \treturn renderer.node;\n    }\n\n    public renderAll(): void {\n    \tfor (const renderer of this.renderers) {\n    \t\trenderer.render();\n    \t}\n    }\n}\n","// TODO: Возможно стоит переписать класс. без регулярок выйдет за o(n)\n// TODO: * почему-то ломает текстовую ноду. Надо править регулярки\n// TODO: Вынести часть реализации в helper\n// TODO: Когда появятся тесты, описание можно будет убрать\n\nimport {Observable} from '../observeble/observeble';\nimport {Subscription} from '../observeble/subscription';\nimport {HTMLElementsRenderManager} from './html-elements-render-manager';\nimport {TextNodesRenderManager} from './text-nodes-render-manager';\n\n/**\n * Разбивает html на массив по одному тегу в каждом элементе и при этом тег на первом месте. Пример:\n * <div>content<p>text</p>content2</div> =>\n * ['<div>content', '<p>text', '</p>content2', '</div>']\n */\nconst HTML_TAG_AND_CONTENT = /<.*?>[^<>]*/gim;\n/**\n * Разбивает тег на массив атрибутов. Пример:\n * <div name={{name}} click={{handler()}} type=\"test\" hidden> =>\n * ['<div', 'name={{name}}', 'click={{handler()}}', 'type=\"test\"', 'hidden']\n */\nconst TEG_ATTRIBUTES = /([(<|</)\\w-]+(?:=)?(?:\"|'|\\{\\{|\\}\\})?[\\w\\-|(|)|.|$]+(?:\"|'|\\{\\{|\\}\\})?)/gim;\n/**\n * Выделяет тег. Пример:\n * '<div hidden name={{name}}> content text' => ['<div hidden name={{name}}>']\n */\nconst TEG = /^<.*?>/;\n/**\n * Начинается не с </\n */\nconst OPEN_TEG = /^<\\//;\n/**\n * Выделяет из строки всё, кроме '<', '/' и пробелов\n */\nconst TEG_NAME = /[^</\\s]+/;\n\nexport type RenderOptions = {\n    content?: HTMLElement[] | Observable<HTMLElement[]>,\n};\n\n// TODO: Разобраться с типизацией страниц и компонентов type Context = {[key: string]: any};\n\nexport class Templator<Context extends object> {\n    slotsMap: Map<HTMLElement, HTMLElement[]> = new Map();\n    contentElement: HTMLElement;\n    nodes: Array<HTMLElement | Text>;\n    contentSubscription: Subscription<HTMLElement[]> | undefined;\n\n    private readonly template: string;\n    private readonly context: Context;\n    private readonly textNodesRenderManager: TextNodesRenderManager<Context>;\n    private readonly htmlElementRendererManager: HTMLElementsRenderManager<Context>;\n\n    constructor(context: Context, template = '') {\n    \tif (typeof template !== 'string') {\n    \t\tthrow new Error('Templator: template is not string');\n    \t}\n\n    \tthis.context = context;\n    \tthis.template = template;\n    \tthis.textNodesRenderManager = new TextNodesRenderManager(this.context);\n    \tthis.htmlElementRendererManager = new HTMLElementsRenderManager(this.context);\n    \tthis.nodes = this.initTemplate(this.template);\n    }\n\n    initTemplate(str: string): Array<HTMLElement | Text> {\n    \tconst outNodes: Array<HTMLElement | Text> = [];\n    \tconst addToChain = (node: HTMLElement, content: string) => {\n    \t\tconst getParent = () => {\n    \t\t\t// Из-за того что есть не закрывающиеся теги\n    \t\t\tconst parentIndex = htmlElements[htmlElements.length - 1] === node\n    \t\t\t\t? htmlElements.length - 2\n    \t\t\t\t: htmlElements.length - 1;\n\n    \t\t\tif (!htmlElements[parentIndex]) {\n    \t\t\t\tthrow new Error('Templator: the parent could not be found, most likely the element with the \"slot\" attribute lies in the root of the template');\n    \t\t\t}\n\n    \t\t\treturn htmlElements[parentIndex];\n    \t\t};\n\n    \t\tif (node.hasAttribute('slot')) {\n    \t\t\tconst parent = getParent();\n\n    \t\t\tif (this.slotsMap.has(parent)) {\n    \t\t\t\tthis.slotsMap.get(parent)!.push(node);\n    \t\t\t} else {\n    \t\t\t\tthis.slotsMap.set(parent, [node]);\n    \t\t\t}\n\n    \t\t\tparent.appendChild(node);\n\n    \t\t\treturn;\n    \t\t}\n\n    \t\tif (htmlElements.length > 1) {\n    \t\t\tconst parent = getParent();\n\n    \t\t\tparent.appendChild(node);\n    \t\t\tparent.appendChild(this.textNodesRenderManager.initTextNode(content));\n    \t\t} else {\n    \t\t\toutNodes.push(node);\n    \t\t\toutNodes.push(this.textNodesRenderManager.initTextNode(content));\n    \t\t}\n    \t};\n\n    \t// Получаем массив, который содержит один тег и контент до следующего тега\n    \tconst htmlConfig = (str.match(HTML_TAG_AND_CONTENT) || [])\n    \t\t.map(str => {\n    \t\t\t// Выбираем только тег\n    \t\t\tconst tagStr = str.match(TEG)![0];\n    \t\t\tconst content = str.split(tagStr)[1];\n    \t\t\t// Разбиваем тег на массив из имени тега и атрибутов\n    \t\t\tconst tagArray = tagStr.match(TEG_ATTRIBUTES) || [];\n\n    \t\t\tconst tag = {\n    \t\t\t\tisOpen: !(OPEN_TEG.test(tagStr)),\n    \t\t\t\tname: tagArray[0].match(TEG_NAME)![0],\n    \t\t\t\tstr: tagStr,\n    \t\t\t};\n\n    \t\t\treturn {tag, content};\n    \t\t});\n\n    \tconst htmlElements: Array<HTMLElement> = [];\n\n    \tfor (const item of htmlConfig) {\n    \t\tif (item.tag.isOpen) {\n    \t\t\tconst element = this.htmlElementRendererManager.initNode(item.tag.str);\n\n    \t\t\tif (this.isSolloTag(element)) {\n    \t\t\t\tif (this.isContentElement(element)) {\n    \t\t\t\t\tthis.contentElement = element;\n    \t\t\t\t}\n\n    \t\t\t\taddToChain(element, item.content);\n    \t\t\t} else {\n    \t\t\t\telement.appendChild(this.textNodesRenderManager.initTextNode(item.content));\n    \t\t\t\thtmlElements.push(element);\n    \t\t\t}\n    \t\t} else {\n    \t\t\tif (\n    \t\t\t\t!htmlElements[htmlElements.length - 1]\n                    || htmlElements[htmlElements.length - 1].tagName !== item.tag.name.toUpperCase()\n    \t\t\t) {\n    \t\t\t\tthrow Error(`Templator: invalid html template: ${str}`);\n    \t\t\t}\n\n    \t\t\taddToChain(htmlElements[htmlElements.length - 1], item.content);\n    \t\t\thtmlElements.pop();\n    \t\t}\n    \t}\n\n    \tif (htmlElements.length) {\n    \t\tthrow Error(`Templator: invalid html template: ${str}`);\n    \t}\n\n    \treturn outNodes;\n    }\n\n    render(options: RenderOptions = {}): void {\n    \tif (\n    \t\toptions.content\n            && this.contentElement\n            && !this.contentSubscription\n    \t) {\n    \t\tthis.setContent(options.content);\n    \t}\n\n    \tthis.textNodesRenderManager.renderAll();\n    \tthis.htmlElementRendererManager.renderAll();\n    \tthis.setSlots();\n    }\n\n    setContent(content: HTMLElement[] | Observable<HTMLElement[]> = []): void {\n    \tif (content instanceof Observable) {\n    \t\tthis.contentSubscription = content.subscribe(elements => {\n    \t\t\twhile (this.contentElement.firstChild) {\n    \t\t\t\tthis.contentElement.removeChild(this.contentElement.firstChild);\n    \t\t\t}\n\n    \t\t\tfor (const node of elements) {\n    \t\t\t\tthis.contentElement.appendChild(node);\n    \t\t\t}\n    \t\t});\n    \t} else {\n    \t\tfor (const node of content) {\n    \t\t\tthis.contentElement.appendChild(node);\n    \t\t}\n    \t}\n    }\n\n    setSlots(): void {\n    \tfor (const parent of this.getMapKeys(this.slotsMap)) {\n    \t\tfor (const slot of this.slotsMap.get(parent)!) {\n    \t\t\tconst slotNode = this.getSlotNode(parent, slot.getAttribute('slot')!);\n\n    \t\t\tif (slotNode) {\n    \t\t\t\tslotNode.appendChild(slot);\n    \t\t\t}\n    \t\t}\n    \t}\n    }\n\n    // TODO: вынести в утилиту\n    getMapKeys<key, value>(map: Map<key, value>): key[] {\n    \tconst keys: key[] = [];\n\n    \tmap.forEach((_value, key) => keys.push(key));\n\n    \treturn keys;\n    }\n\n    isSolloTag(element: HTMLElement): boolean {\n    \tconst solloTags = ['area',\n    \t\t'base',\n    \t\t'basefont',\n    \t\t'bgsound',\n    \t\t'br',\n    \t\t'col',\n    \t\t'command',\n    \t\t'embed',\n    \t\t'hr',\n    \t\t'img',\n    \t\t'input',\n    \t\t'isindex',\n    \t\t'keygen',\n    \t\t'link',\n    \t\t'meta',\n    \t\t'param',\n    \t\t'source',\n    \t\t'track',\n    \t\t'wbr',\n    \t\t'content'];\n    \treturn solloTags.includes(element.tagName.toLowerCase());\n    }\n\n    isContentElement(element: HTMLElement): boolean {\n    \treturn element.tagName.toLowerCase() === 'content';\n    }\n\n    // Node.querySelector(\"slot[name=\"name\"]\")\n    getSlotNode(node: Element, name: string): Element | null {\n    \tfor (let index = 0; index < node.children.length; index++) {\n    \t\tconst child = node.children.item(index);\n\n    \t\tif (child!.tagName === 'SLOT' && child!.getAttribute('name') === name) {\n    \t\t\treturn child;\n    \t\t}\n\n    \t\tconst req = this.getSlotNode(child!, name);\n\n    \t\tif (req) {\n    \t\t\treturn req;\n    \t\t}\n    \t}\n\n    \treturn null;\n    }\n}\n","import {Guard} from './interfaces/guard';\nimport {Observable} from './observeble/observeble';\nimport {Templator, RenderOptions} from './templator/templator';\n\nexport interface ComponentConfig {\n    name: string;\n    template: string;\n    observedAttributes?: string[];\n\tguards?: Array<new () => Guard>;\n}\n\nexport interface CustomHTMLElement {\n    content?: HTMLElement[] | Observable<HTMLElement[]>;\n    onInit?: () => void;\n    onRendered?: (element: HTMLElement) => void;\n    onDestroy?: () => void;\n    onAttributeChanged?: (\n\t\tname: string, oldValue: string | null, newValue: string | null) => boolean;\n}\n\nenum defaultObservedAttributes {\n    hidden = 'hidden',\n    style = 'style',\n}\n\n// @ts-ignore тут вообще никак не получается без any (\nexport type Component = CustomHTMLElement & any;\nexport type Clazz = Partial<{observedAttributes: string}> & (new () => Component);\n\nexport function component(config: ComponentConfig):\n(Сlazz: Clazz) => Clazz {\n\treturn function (Clazz: Clazz): Clazz {\n\t\tclass CustomElement extends HTMLElement {\n            private templator: Templator<Component> | undefined;\n            private clazz: Component;\n\t\t\tprivate template: string;\n\n\t\t\tconstructor() {\n            \tsuper();\n\n\t\t\t\tthis.template = config.template;\n            \tthis.clazz = new Clazz();\n\t\t\t}\n\n\t\t\tpublic connectedCallback(): void {\n\t\t\t\tif (config.guards) {\n\t\t\t\t\tthis.checkGuards(config.guards);\n\t\t\t\t}\n\n            \tif (this.clazz.onInit) {\n            \t\tthis.clazz.onInit();\n            \t}\n\n            \tthis.render();\n\n            \tif (this.clazz.onRendered) {\n            \t\tthis.clazz.onRendered(this);\n            \t}\n\t\t\t}\n\n\t\t\tpublic disconnectedCallback(): void {\n            \tif (this.clazz.onDestroy) {\n            \t\tthis.clazz.onDestroy();\n            \t}\n\t\t\t}\n\n\t\t\tpublic static get observedAttributes(): string[] {\n            \t// @ts-ignore\n            \treturn (Object.values(defaultObservedAttributes) as string[])\n            \t\t.concat(\n            \t\t\tconfig.observedAttributes ? config.observedAttributes : [],\n            \t\t).concat(\n            \t\t\tClazz.observedAttributes ? Clazz.observedAttributes : [],\n            \t\t);\n\t\t\t}\n\n\t\t\tpublic attributeChangedCallback(\n            \tname: string, oldValue: string | null, newValue: string | null): void {\n            \tlet needRender = false;\n\n            \t// @ts-ignore name - строка не обязательно содержааяся в defaultObservedAttributes\n            \tif (Object.values(defaultObservedAttributes).includes(name)) {\n            \t\tneedRender = this.onDefaultAttributeChanged(name, oldValue, newValue);\n            \t}\n\n            \tif (this.clazz.onAttributeChanged) {\n            \t\tneedRender = this.clazz.onAttributeChanged(name, oldValue, newValue)\n\t\t\t\t\t\t|| needRender;\n            \t}\n\n            \tif (needRender) {\n            \t\tthis.render();\n            \t}\n\t\t\t}\n\n\t\t\t// @ts-ignore используется внешними компонентами\n\t\t\tpublic inject(fieldName: string, value: unknown): void {\n\t\t\t\t// @ts-ignore\n\t\t\t\tthis.clazz[fieldName] = value;\n\t\t\t}\n\n\t\t\tprivate render(): void {\n            \tconst options: RenderOptions = {};\n            \tconst {content} = this.clazz;\n\n            \tif (content) {\n            \t\toptions.content = content;\n            \t}\n\n            \tif (!this.templator) {\n            \t\tthis.init();\n            \t}\n\n            \tthis.templator!.render(this.clazz);\n\t\t\t}\n\n\t\t\tprivate init(): void {\n            \tthis.templator = new Templator(this.clazz, this.template);\n\n            \tfor (const node of this.templator.nodes) {\n            \t\tthis.appendChild(node);\n            \t}\n\t\t\t}\n\n\t\t\tprivate onDefaultAttributeChanged(\n            \tname: string, _oldValue: string | null, newValue: string | null): boolean {\n            \tswitch (name) {\n            \t\tcase defaultObservedAttributes.hidden:\n            \t\t\tthis.style.display = this.hasAttribute(defaultObservedAttributes.hidden)\n            \t\t\t\t? 'none'\n            \t\t\t\t: '';\n            \t\t\tbreak;\n            \t\tcase defaultObservedAttributes.style:\n            \t\t\tif (!newValue) {\n            \t\t\t\tthis.removeAttribute(defaultObservedAttributes.style);\n            \t\t\t}\n\n            \t\t\tbreak;\n            \t\tdefault: return false;\n            \t}\n\n            \treturn false;\n\t\t\t}\n\n\t\t\tprivate async checkGuards(guards: Array<new () => Guard>): Promise<void> {\n\t\t\t\tfor (const GuardConstructor of guards) {\n\t\t\t\t\tconst guard = new GuardConstructor();\n\t\t\t\t\tconst canOpen = guard.canOpen();\n\n\t\t\t\t\tif (canOpen instanceof Promise) {\n\t\t\t\t\t\tif (!await canOpen) {\n\t\t\t\t\t\t\tguard.onOpenError();\n\t\t\t\t\t\t\tthis.fillsWithEmptiness();\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (!canOpen) {\n\t\t\t\t\t\tguard.onOpenError();\n\t\t\t\t\t\tthis.fillsWithEmptiness();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprivate fillsWithEmptiness(): void {\n\t\t\t\tthis.template = '';\n\t\t\t\tthis.clazz = {};\n\t\t\t}\n\t\t}\n\n\t\tcustomElements.define(config.name, CustomElement);\n\n\t\treturn <new () => Component>CustomElement;\n\t};\n}\n","export const template = `\n    <content>\n`;\n","export const template = `\n    <p>страничка с чатами</p>\n    <button @click={{navigateToAuth()}}>\n        Перейти к страничке авторизации\n    </button>\n    <button @click={{navigateToProfile()}}>\n        Перейти к страничке профиля\n    </button>\n    <button @click={{logout()}}>\n        Выйти из аккаунта\n    </button>\n`;\n","export enum pages {\n    main = '/',\n    chats = '/',\n    auth = '/auth',\n    profile = '/profile',\n    default = 'default',\n}\n","export enum dataStatus {\n    loading = 'loading',\n    valid = 'valid',\n    invalid = 'invalid',\n    error = 'error',\n    default = 'default',\n}\n","import {dataStatus} from '../../enums/data-status.enum';\nimport {Data} from '../../interfaces/data.interface';\n\nexport function selectDataStatus<T>(data: Data<T>): dataStatus {\n\treturn data.status;\n}\n","import {authToken} from '../../interfaces/authorization-state.interface';\nimport {Data} from '../../interfaces/data.interface';\nimport {State} from '../../interfaces/state.interface';\n\nexport function selectAuthToken(state: State): Data<authToken> {\n\treturn state.authorization.authToken;\n}\n","import {dataStatus} from '../../enums/data-status.enum';\nimport {State} from '../../interfaces/state.interface';\nimport {selectDataStatus} from '../data/select-status';\nimport {selectAuthToken} from './select-auth-token';\n\nexport function selectIsAuthorized(state: State): boolean {\n\tconst authTokenStatus = selectDataStatus(selectAuthToken(state));\n\n\t// По дефолту считаем что мы авторизированы,\n\t// поскольку нет валидных способов узнать есть ли токен в куках(\n\treturn authTokenStatus === dataStatus.valid || authTokenStatus === dataStatus.default;\n}\n","import {dataStatus} from '../enums/data-status.enum';\nimport {Data} from '../interfaces/data.interface';\n\nexport function getDefaultData<T>(): Data<T> {\n\treturn {\n\t\tstatus: dataStatus.default,\n\t\ttime: undefined,\n\t\terror: undefined,\n\t\tvalue: undefined,\n\t};\n}\n","import {getDefaultData} from '../functions/get-default-data';\nimport {State} from '../interfaces/state.interface';\nimport {authToken, logout, userData} from '../interfaces/authorization-state.interface';\nimport {changePassword, changeUser} from '../interfaces/user-state.interface';\nimport {addChatUsers, chatsList, createChat, deleteChat, deleteChatUsers} from '../interfaces/chats-state.interface';\n\nexport const defaultState: State = {\n\tauthorization: {\n\t\tauthToken: getDefaultData<authToken>(),\n\t\tlogout: getDefaultData<logout>(),\n\t\tuserData: getDefaultData<userData>(),\n\t},\n\tuser: {\n\t\tchangePassword: getDefaultData<changePassword>(),\n\t\tchangeUserData: getDefaultData<changeUser>(),\n\t},\n\tchats: {\n\t\tlist: getDefaultData<chatsList>(),\n\t\tcreateChat: getDefaultData<createChat>(),\n\t\tdeleteChat: getDefaultData<deleteChat>(),\n\t\ttokens: {},\n\t\tdeleteChatUsers: getDefaultData<deleteChatUsers>(),\n\t\taddChatUsers: getDefaultData<addChatUsers>(),\n\t},\n\tactiveChats: {\n\t\tmanagers: {},\n\t\tchatsReadyStates: {},\n\t},\n};\n","export enum activeChatsActionType {\n    addActiveChat = 'activeChats-addActiveChat',\n    removeActiveChat = 'activeChats-removeActiveChat',\n\n    changeChatReadyState = 'activeChats-changeReadyState',\n}\n","import {Action, actionType} from '../interfaces/action.interface';\nimport {State} from '../interfaces/state.interface';\nimport {reducer} from '../reducers/reducer';\n\nexport function reducerAdapt<selectedReducer>(\n\treducers: selectedReducer,\n\tselector: keyof State,\n): Record<actionType, reducer<State>> {\n\tconst globalReducers = {} as Record<actionType, reducer<State>>;\n\n\tfor (const [actionType, reducer] of Object.entries(reducers)) {\n\t\t// @ts-ignore\n\t\tglobalReducers[actionType] = function (state: State, action: Action): State {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[selector]: reducer(state[selector], action),\n\t\t\t};\n\t\t};\n\t}\n\n\treturn globalReducers;\n}\n","import {AddActiveChatAction, ChangeChatReadyStateAction, RemoveActiveChatAction} from '../actions/active-chats-actions';\nimport {activeChatsActionType} from '../enums/active-chats-actions';\nimport {reducerAdapt} from '../functions/reduser-adaptor';\nimport {ActiveChatsState} from '../interfaces/active-chats-state.interface';\nimport {reducer} from './reducer';\n\nconst _activeChatsReducers: Record<activeChatsActionType, reducer<ActiveChatsState>> = {\n\t[activeChatsActionType.addActiveChat]:\n        (state: ActiveChatsState, action: AddActiveChatAction) =>\n        \t({\n        \t\t...state,\n        \t\tmanagers: {\n        \t\t\t...state.managers,\n        \t\t\t[action.payload.chatId]: {\n        \t\t\t\tcontroller: action.payload.controller,\n        \t\t\t\tlistener: action.payload.listener,\n        \t\t\t},\n        \t\t},\n        \t}),\n\n\t[activeChatsActionType.removeActiveChat]:\n        (state: ActiveChatsState, action: RemoveActiveChatAction) => {\n        \tconst controllers = {...state.managers};\n\n        \tdelete controllers[action.payload];\n\n        \treturn {\n        \t\t...state,\n        \t\tcontrollers,\n        \t};\n        },\n\n\t[activeChatsActionType.changeChatReadyState]:\n        (state: ActiveChatsState, action: ChangeChatReadyStateAction) =>\n        \t({\n        \t\t...state,\n        \t\tchatsReadyStates: {\n        \t\t\t...state.chatsReadyStates,\n        \t\t\t[action.payload.chatId]: action.payload.readyState,\n        \t\t},\n        \t}),\n};\n\nexport const activeChatsReducers = reducerAdapt(_activeChatsReducers, 'activeChats');\n","export enum authorizationActionType {\n    authTokenUpload = 'authorization-authToken__upload',\n    authTokenUploaded = 'authorization-authToken__uploaded',\n    authTokenUploadError = 'authorization-authToken__uploadError',\n\n    logoutUpload = 'authorization-logout__upload',\n    logoutUploaded = 'authorization-logout__uploaded',\n    logoutUploadError = 'authorization-logout__uploadError',\n\n    userDataUpload = 'authorization-userData__upload',\n    userDataUploaded = 'authorization-userData__uploaded',\n    userDataUploadError = 'authorization-userData__uploadError',\n}\n","import {\n\tUploadedAuthTokenAction,\n\tUploadedLogoutAction,\n\tUploadedUserDataAction,\n\tUploadErrorAuthTokenAction,\n\tUploadErrorLogoutAction,\n\tUploadErrorUserDataAction} from '../actions/authorization.actions';\nimport {dataStatus} from '../enums/data-status.enum';\nimport {authorizationActionType} from '../enums/authorization-action-type.enum';\nimport {reducerAdapt} from '../functions/reduser-adaptor';\nimport {AuthorizationState} from '../interfaces/authorization-state.interface';\nimport {reducer} from './reducer';\n\n// TODO: кажется, нужно создавать редьюсеры для изменения состояния Data в одном месте,\n// иначе изменить интерфейс Data потом будет нереально\nconst _authorizationReducers: Record<authorizationActionType, reducer<AuthorizationState>> = {\n\t[authorizationActionType.authTokenUpload]:\n        (state: AuthorizationState) =>\n        \t({\n        \t\t...state,\n        \t\tauthToken: {\n        \t\t\t...state.authToken,\n        \t\t\tstatus: dataStatus.loading,\n        \t\t},\n        \t}),\n\n\t[authorizationActionType.authTokenUploaded]:\n        (state: AuthorizationState, action: UploadedAuthTokenAction) =>\n        \t({\n        \t\t...state,\n        \t\tauthToken: {\n        \t\t\t...state.authToken,\n        \t\t\terror: undefined,\n        \t\t\tstatus: dataStatus.valid,\n        \t\t\tvalue: action.payload,\n        \t\t\ttime: Date.now(),\n        \t\t},\n        \t}),\n\n\t[authorizationActionType.authTokenUploadError]:\n        (state: AuthorizationState, action: UploadErrorAuthTokenAction) =>\n        \t({\n        \t\t...state,\n        \t\tauthToken: {\n        \t\t\t...state.authToken,\n        \t\t\tstatus: dataStatus.error,\n        \t\t\terror: action.payload,\n        \t\t},\n        \t}),\n\n\t[authorizationActionType.logoutUpload]:\n        (state: AuthorizationState) =>\n        \t({\n        \t\t...state,\n        \t\tauthToken: {\n        \t\t\t...state.authToken,\n        \t\t\tstatus: dataStatus.loading,\n        \t\t},\n        \t}),\n\n\t[authorizationActionType.logoutUploaded]:\n        (state: AuthorizationState, action: UploadedLogoutAction) =>\n        \t({\n        \t\t...state,\n        \t\tlogout: {\n        \t\t\t...state.logout,\n        \t\t\terror: undefined,\n        \t\t\tstatus: dataStatus.valid,\n        \t\t\tvalue: action.payload,\n        \t\t\ttime: Date.now(),\n        \t\t},\n        \t\tauthToken: {\n        \t\t\t...state.authToken,\n        \t\t\tstatus: dataStatus.invalid,\n        \t\t},\n        \t}),\n\n\t[authorizationActionType.logoutUploadError]:\n        (state: AuthorizationState, action: UploadErrorLogoutAction) =>\n        \t({\n        \t\t...state,\n        \t\tlogout: {\n        \t\t\t...state.logout,\n        \t\t\tstatus: dataStatus.error,\n        \t\t\terror: action.payload,\n        \t\t},\n        \t}),\n\n\t[authorizationActionType.userDataUpload]:\n        (state: AuthorizationState) =>\n        \t({\n        \t\t...state,\n        \t\tlogout: {\n        \t\t\t...state.logout,\n        \t\t\tstatus: dataStatus.loading,\n        \t\t},\n        \t}),\n\n\t[authorizationActionType.userDataUploaded]:\n        (state: AuthorizationState, action: UploadedUserDataAction) =>\n        \t({\n        \t\t...state,\n        \t\tuserData: {\n        \t\t\t...state.userData,\n        \t\t\terror: undefined,\n        \t\t\tstatus: dataStatus.valid,\n        \t\t\tvalue: action.payload,\n        \t\t\ttime: Date.now(),\n        \t\t},\n        \t}),\n\n\t[authorizationActionType.userDataUploadError]:\n        (state: AuthorizationState, action: UploadErrorUserDataAction) =>\n        \t({\n        \t\t...state,\n        \t\tuserData: {\n        \t\t\t...state.userData,\n        \t\t\tstatus: dataStatus.error,\n        \t\t\terror: action.payload,\n        \t\t},\n        \t}),\n};\n\nexport const authorizationReducers = reducerAdapt(_authorizationReducers, 'authorization');\n","import {dataStatus} from '../store/enums/data-status.enum';\nimport {Action} from '../store/interfaces/action.interface';\nimport {reducer} from '../store/reducers/reducer';\n\nexport class DataReducersHelper {\n\tpublic static createUploadReducer<state>(field: keyof state): reducer<state> {\n\t\treturn (state: state) =>\n\t\t\t({\n\t\t\t\t...state,\n\t\t\t\t[field]: {\n\t\t\t\t\t...state[field],\n\t\t\t\t\tstatus: dataStatus.loading,\n\t\t\t\t},\n\t\t\t});\n\t}\n\n\tpublic static createUploadedReducer<state, action extends Action>(\n\t\tfield: keyof state,\n\t): reducer<state> {\n\t\treturn (state: state, action: action) =>\n\t\t\t({\n\t\t\t\t...state,\n\t\t\t\t[field]: {\n\t\t\t\t\t...state[field],\n\t\t\t\t\terror: undefined,\n\t\t\t\t\tstatus: dataStatus.valid,\n\t\t\t\t\tvalue: action.payload,\n\t\t\t\t\ttime: Date.now(),\n\t\t\t\t},\n\t\t\t});\n\t}\n\n\tpublic static createUploadErrorReducer<state, action extends Action>(\n\t\tfield: keyof state,\n\t): reducer<state> {\n\t\treturn (state: state, action: action) =>\n\t\t\t({\n\t\t\t\t...state,\n\t\t\t\t[field]: {\n\t\t\t\t\t...state[field],\n\t\t\t\t\tstatus: dataStatus.error,\n\t\t\t\t\terror: action.payload,\n\t\t\t\t},\n\t\t\t});\n\t}\n}\n","export enum chatsActionType {\n    chatListUpload = 'chats-chatList__upload',\n    chatListUploaded = 'chats-chatList__uploaded',\n    chatListUploadError = 'chats-chatList__uploadError',\n\n    createChatUpload = 'chats-createChat__upload',\n    createChatUploaded = 'chats-createChat__uploaded',\n    createChatUploadError = 'chats-createChat__uploadError',\n\n    deleteChatUpload = 'chats-deleteChat__upload',\n    deleteChatUploaded = 'chats-deleteChat__uploaded',\n    deleteChatUploadError = 'chats-deleteChat__uploadError',\n\n    chatTokenUpload = 'chats-chatToken__upload',\n    chatTokenUploaded = 'chats-chatToken__uploaded',\n    chatTokenUploadError = 'chats-chatToken__uploadError',\n\n    deleteChatUsersUpload = 'chats-deleteChatUsers__upload',\n    deleteChatUsersUploaded = 'chats-deleteChatUsers__uploaded',\n    deleteChatUsersUploadError = 'chats-deleteChatUsers__uploadError',\n\n    addChatUsersUpload = 'chats-addChatUsers__upload',\n    addChatUsersUploaded = 'chats-addChatUsers__uploaded',\n    addChatUsersUploadError = 'chats-addChatUsers__uploadError',\n}\n","import {DataReducersHelper} from '../../utils/data-reducers-helper';\nimport {UploadChatTokenAction, UploadedAddChatUsersAction, UploadedChatListAction, UploadedChatTokenAction, UploadedDeleteChatUsersAction, UploadedСreateChatAction, UploadErrorAddChatUsersAction, UploadErrorChatListAction, UploadErrorChatTokenAction, UploadErrorDeleteChatUsersAction, UploadErrorСreateChatAction} from '../actions/chats-actions';\nimport {chatsActionType} from '../enums/chats-action-type.enum';\nimport {dataStatus} from '../enums/data-status.enum';\nimport {reducerAdapt} from '../functions/reduser-adaptor';\nimport {ChatsState} from '../interfaces/chats-state.interface';\nimport {reducer} from './reducer';\n\nconst _chatsReducers: Record<chatsActionType, reducer<ChatsState>> = {\n\t[chatsActionType.chatListUpload]:\n        DataReducersHelper.createUploadReducer<ChatsState>('list'),\n\t[chatsActionType.chatListUploaded]:\n        DataReducersHelper.createUploadedReducer<ChatsState, UploadedChatListAction>('list'),\n\t[chatsActionType.chatListUploadError]:\n        DataReducersHelper.createUploadErrorReducer<ChatsState, UploadErrorChatListAction>('list'),\n\n\t[chatsActionType.createChatUpload]:\n        DataReducersHelper.createUploadReducer<ChatsState>('createChat'),\n\t[chatsActionType.createChatUploaded]:\n        DataReducersHelper.createUploadedReducer<ChatsState, UploadedСreateChatAction>('createChat'),\n\t[chatsActionType.createChatUploadError]:\n        DataReducersHelper.createUploadErrorReducer<ChatsState, UploadErrorСreateChatAction>('createChat'),\n\n\t[chatsActionType.deleteChatUpload]:\n        DataReducersHelper.createUploadReducer<ChatsState>('deleteChat'),\n\t[chatsActionType.deleteChatUploaded]:\n        DataReducersHelper.createUploadedReducer<ChatsState, UploadedСreateChatAction>('deleteChat'),\n\t[chatsActionType.deleteChatUploadError]:\n        DataReducersHelper.createUploadErrorReducer<ChatsState, UploadErrorСreateChatAction>('deleteChat'),\n\n\t[chatsActionType.deleteChatUsersUpload]:\n        DataReducersHelper.createUploadReducer<ChatsState>('deleteChatUsers'),\n\t[chatsActionType.deleteChatUsersUploaded]:\n        DataReducersHelper.createUploadedReducer<ChatsState, UploadedDeleteChatUsersAction>('deleteChatUsers'),\n\t[chatsActionType.deleteChatUsersUploadError]:\n        DataReducersHelper.createUploadErrorReducer<ChatsState, UploadErrorDeleteChatUsersAction>('deleteChatUsers'),\n\n\t[chatsActionType.addChatUsersUpload]:\n        DataReducersHelper.createUploadReducer<ChatsState>('addChatUsers'),\n\t[chatsActionType.addChatUsersUploaded]:\n        DataReducersHelper.createUploadedReducer<ChatsState, UploadedAddChatUsersAction>('addChatUsers'),\n\t[chatsActionType.addChatUsersUploadError]:\n        DataReducersHelper.createUploadErrorReducer<ChatsState, UploadErrorAddChatUsersAction>('addChatUsers'),\n\n\t[chatsActionType.chatTokenUpload]:\n        (state: ChatsState, action: UploadChatTokenAction) =>\n        \t({\n        \t\t...state,\n        \t\ttokens: {\n        \t\t\t...state.tokens,\n        \t\t\t[action.payload]: {\n        \t\t\t\t...state.tokens[action.payload],\n        \t\t\t\tstatus: dataStatus.loading,\n        \t\t\t},\n        \t\t},\n        \t}),\n\t[chatsActionType.chatTokenUploaded]:\n        (state: ChatsState, action: UploadedChatTokenAction) =>\n        \t({\n        \t\t...state,\n        \t\ttokens: {\n        \t\t\t...state.tokens,\n        \t\t\t[action.payload.chatId]: {\n        \t\t\t\t...state.tokens[action.payload.chatId],\n        \t\t\t\terror: undefined,\n        \t\t\t\tstatus: dataStatus.valid,\n        \t\t\t\tvalue: action.payload.chatToken,\n        \t\t\t\ttime: Date.now(),\n        \t\t\t},\n        \t\t},\n        \t}),\n\t[chatsActionType.chatTokenUploadError]:\n        (state: ChatsState, action: UploadErrorChatTokenAction) =>\n        \t({\n        \t\t...state,\n        \t\ttokens: {\n        \t\t\t...state.tokens,\n        \t\t\t[action.payload.chatId]: {\n        \t\t\t\t...state.tokens[action.payload.chatId],\n        \t\t\t\tstatus: dataStatus.error,\n        \t\t\t\terror: action.payload.error,\n        \t\t\t},\n        \t\t},\n        \t}),\n};\n\nexport const chatsReducers = reducerAdapt(_chatsReducers, 'chats');\n","export enum userActionType {\n    changePasswordUpload = 'user-changePassword__upload',\n    changePasswordUploaded = 'user-changePassword__uploaded',\n    changePasswordUploadError = 'user-changePassword__uploadError',\n\n    changeUserDataUpload = 'user-changeUserData__upload',\n    changeUserDataUploaded = 'user-changeUserData__uploaded',\n    changeUserDataUploadError = 'user-changeUserData__uploadError',\n}\n","import {\n\tUploadedChangePasswordAction,\n\tUploadedChangeUserDataAction,\n\tUploadErrorChangePasswordAction,\n\tUploadErrorChangeUserDataAction} from '../actions/user.actions';\nimport {dataStatus} from '../enums/data-status.enum';\nimport {userActionType} from '../enums/user-action-type.enum';\nimport {reducerAdapt} from '../functions/reduser-adaptor';\nimport {State} from '../interfaces/state.interface';\nimport {UserState} from '../interfaces/user-state.interface';\nimport {reducer} from './reducer';\n\nconst _userReducers: Partial<Record<userActionType, reducer<UserState>>> = {\n\t[userActionType.changePasswordUpload]:\n        (state: UserState) =>\n        \t({\n        \t\t...state,\n        \t\tchangePassword: {\n        \t\t\t...state.changePassword,\n        \t\t\tstatus: dataStatus.loading,\n        \t\t},\n        \t}),\n\n\t[userActionType.changePasswordUploaded]:\n        (state: UserState, action: UploadedChangePasswordAction) =>\n        \t({\n        \t\t...state,\n        \t\tchangePassword: {\n        \t\t\t...state.changePassword,\n        \t\t\terror: undefined,\n        \t\t\tstatus: dataStatus.valid,\n        \t\t\tvalue: action.payload,\n        \t\t\ttime: Date.now(),\n        \t\t},\n        \t}),\n\n\t[userActionType.changePasswordUploadError]:\n        (state: UserState, action: UploadErrorChangePasswordAction) =>\n        \t({\n        \t\t...state,\n        \t\tchangePassword: {\n        \t\t\t...state.changePassword,\n        \t\t\tstatus: dataStatus.error,\n        \t\t\terror: action.payload,\n        \t\t},\n        \t}),\n\n\t[userActionType.changeUserDataUpload]:\n        (state: UserState) =>\n        \t({\n        \t\t...state,\n        \t\tchangeUserData: {\n        \t\t\t...state.changeUserData,\n        \t\t\tstatus: dataStatus.loading,\n        \t\t},\n        \t}),\n\n\t[userActionType.changeUserDataUploadError]:\n        (state: UserState, action: UploadErrorChangeUserDataAction) =>\n        \t({\n        \t\t...state,\n        \t\tchangeUserData: {\n        \t\t\t...state.changeUserData,\n        \t\t\tstatus: dataStatus.error,\n        \t\t\terror: action.payload,\n        \t\t},\n        \t}),\n};\n\nconst _globalUserReducers: Partial<Record<userActionType, reducer<State>>> = {\n\t[userActionType.changeUserDataUploaded]:\n        (state: State, action: UploadedChangeUserDataAction) =>\n        \t({\n        \t\t...state,\n        \t\tuser: {\n        \t\t\t...state.user,\n        \t\t\tchangeUserData: {\n        \t\t\t\t...state.user.changeUserData,\n        \t\t\t\terror: undefined,\n        \t\t\t\tstatus: dataStatus.valid,\n        \t\t\t\tvalue: undefined,\n        \t\t\t\ttime: Date.now(),\n        \t\t\t},\n        \t\t},\n        \t\tauthorization: {\n        \t\t\t...state.authorization,\n        \t\t\tuserData: {\n        \t\t\t\t...state.authorization.userData,\n        \t\t\t\terror: undefined,\n        \t\t\t\tstatus: dataStatus.valid,\n        \t\t\t\tvalue: action.payload,\n        \t\t\t\ttime: Date.now(),\n        \t\t\t},\n        \t\t},\n        \t}),\n};\n\nexport const userReducers: Record<userActionType, reducer<State>>\n    = Object.assign(reducerAdapt(_userReducers, 'user'), _globalUserReducers);\n","import {Action, actionType} from '../interfaces/action.interface';\nimport {State} from '../interfaces/state.interface';\nimport {activeChatsReducers} from './active-chats-state.reducers';\nimport {authorizationReducers} from './authorization-reducers';\nimport {chatsReducers} from './chats-reducers';\nimport {userReducers} from './user-reducers';\n\nexport type reducer<state> = (state: state, action: Action) => state;\n\nexport function getReducer(): reducer<State> {\n\tconst reducers: Record<actionType, reducer<State>> = {\n\n\t\t...authorizationReducers,\n\t\t...userReducers,\n\t\t...chatsReducers,\n\t\t...activeChatsReducers,\n\t};\n\n\treturn function (state: State, action: Action): State {\n\t\treturn reducers[action.type](state, action);\n\t};\n}\n","import {Observable} from '../utils/observeble/observeble';\nimport {Subject} from '../utils/observeble/subject';\nimport {defaultState} from './consts/default-state.const';\nimport {Action} from './interfaces/action.interface';\nimport {State} from './interfaces/state.interface';\nimport {getReducer, reducer} from './reducers/reducer';\n\nlet instance: Store;\n\nexport class Store {\n    private _state: State = defaultState;\n\n    private readonly _$state: Subject<State> = new Subject<State>(this._state);\n    private readonly reduser: reducer<State> = getReducer();\n\n    constructor() {\n    \tif (instance) {\n    \t\treturn instance;\n    \t}\n\n    \tinstance = this;\n    }\n\n    get $state(): Observable<State> {\n    \treturn this._$state.asObserveble();\n    }\n\n    get state(): State {\n    \treturn this._state;\n    }\n\n    dispatch(action: Action): void {\n    \tconst nextState = this.reduser(this._state, action);\n\n    \tthis._state = nextState;\n    \tthis._$state.next(nextState);\n    }\n}\n","import {pages} from '../service/router/pages.config';\nimport {RouterService} from '../service/router/router.service';\nimport {selectIsAuthorized} from '../store/selectors/authorization/select-is-authorized';\nimport {Store} from '../store/store';\nimport {Guard} from '../utils/interfaces/guard';\n\nexport class AuthGuard implements Guard {\n    private readonly routerService: RouterService<{}>;\n    private readonly store: Store;\n\n    constructor() {\n    \tthis.store = new Store();\n    \tthis.routerService = new RouterService();\n    }\n\n    public canOpen(): boolean {\n    \treturn selectIsAuthorized(this.store.state);\n    }\n\n    public onOpenError(): void {\n    \tthis.routerService.navigateTo(pages.auth);\n    }\n}\n","import {authorizationActionType} from '../enums/authorization-action-type.enum';\nimport {Action} from '../interfaces/action.interface';\nimport {authToken, logout, userData} from '../interfaces/authorization-state.interface';\n\nexport class UploadAuthTokenAction implements Action {\n    public readonly type = authorizationActionType.authTokenUpload;\n}\n\nexport class UploadedAuthTokenAction implements Action {\n    public readonly type = authorizationActionType.authTokenUploaded;\n    public readonly payload: authToken = undefined;\n}\n\nexport class UploadErrorAuthTokenAction implements Action {\n    public readonly type = authorizationActionType.userDataUploadError;\n    public readonly payload: Error;\n\n    constructor(error: Error) {\n    \tthis.payload = error;\n    }\n}\n\nexport class UploadLogoutAction implements Action {\n    public readonly type = authorizationActionType.logoutUpload;\n}\n\nexport class UploadedLogoutAction implements Action {\n    public readonly type = authorizationActionType.logoutUploaded;\n    public readonly payload: logout = undefined;\n}\n\nexport class UploadErrorLogoutAction implements Action {\n    public readonly type = authorizationActionType.logoutUploadError;\n    public readonly payload: Error;\n\n    constructor(error: Error) {\n    \tthis.payload = error;\n    }\n}\n\nexport class UploadUserDataAction implements Action {\n    public readonly type = authorizationActionType.userDataUpload;\n}\n\nexport class UploadedUserDataAction implements Action {\n    public readonly type = authorizationActionType.userDataUploaded;\n    public readonly payload: userData;\n\n    constructor(data: userData) {\n    \tthis.payload = data;\n    }\n}\n\nexport class UploadErrorUserDataAction implements Action {\n    public readonly type = authorizationActionType.userDataUploadError;\n    public readonly payload: Error;\n\n    constructor(error: Error) {\n    \tthis.payload = error;\n    }\n}\n","import {Data} from '../../interfaces/data.interface';\nimport {State} from '../../interfaces/state.interface';\nimport {userData} from '../../interfaces/authorization-state.interface';\n\nexport function selectUserData(state: State): Data<userData> {\n\treturn state.authorization.userData;\n}\n","import {pages} from '../service/router/pages.config';\nimport {RouterService} from '../service/router/router.service';\nimport {Interceptor} from '../utils/interfaces/interceptor';\n\nexport class AuthInterceptor implements Interceptor {\n    private readonly routerService: RouterService<{}>;\n\n    constructor() {\n    \tthis.routerService = new RouterService();\n    }\n\n    public interceptRequest(request: XMLHttpRequest) {\n    \tif (request.status === 401) {\n    \t\tthis.routerService.navigateTo(pages.auth);\n    \t}\n    }\n}\n","export enum HTTPMethod {\n    GET = 'GET',\n    PUT = 'PUT',\n    POST = 'POST',\n    DELETE = 'DELETE',\n}\n","import {Interceptor} from '../interfaces/interceptor';\nimport {HTTPRequest} from './http-request';\n\ntype query = {[key: string]: string | number | boolean} | undefined;\ntype requestHandler = (this: XMLHttpRequest, ev: ProgressEvent) => any;\n\nexport interface HTTPResponse<Body> {\n    status: number,\n    statusText: string,\n    body: Body,\n}\n\nexport type AppHTTPRequest = Omit<HTTPRequest, 'origin'>;\n\nexport class HTTPClient {\n    private readonly origin: string | undefined;\n    private readonly interseptors: Interceptor[] | undefined;\n\n    constructor(origin?: string, interseptors?: Interceptor[]) {\n    \tthis.origin = origin;\n    \tthis.interseptors = interseptors;\n    }\n\n    public upload<body>(appRequest: AppHTTPRequest): Promise<HTTPResponse<body>> {\n    \tconst request: HTTPRequest = Object.create(appRequest);\n\n    \trequest.origin = this.origin || window.location.origin;\n\n    \treturn this._upload(request);\n    }\n\n    private static queryStringify(query: query): string {\n    \tif (!query || typeof query !== 'object' || Object.keys(query).length === 0) {\n    \t\treturn '';\n    \t}\n\n    \treturn `?${Object.keys(query).map(key => `${key}=${query[key]}`).join('&')}`;\n    }\n\n    private static mapXMLHttpRequestToResponse<body>(xhr: XMLHttpRequest): HTTPResponse<body> {\n    \treturn {\n    \t\tstatus: xhr.status,\n    \t\tstatusText: xhr.statusText,\n    \t\tbody: xhr.response,\n    \t};\n    }\n\n    private _upload<body>(request: HTTPRequest): Promise<HTTPResponse<body>> {\n    \treturn new Promise((resolve, reject) => {\n    \t\tconst xhr = new XMLHttpRequest();\n\n    \t\tif (request.timeout) {\n    \t\t\txhr.timeout = request.timeout;\n    \t\t}\n\n    \t\txhr.responseType =\t'json';\n    \t\txhr.withCredentials = true;\n\n    \t\txhr.onabort = this.getXMLHttpRequestHandler<body>(resolve, reject);\n    \t\txhr.onerror = this.getXMLHttpRequestHandler<body>(resolve, reject);\n    \t\txhr.ontimeout = this.getXMLHttpRequestHandler<body>(resolve, reject);\n    \t\txhr.onload = this.getXMLHttpRequestHandler<body>(resolve, reject);\n\n    \t\txhr.open(\n    \t\t\trequest.method,\n    \t\t\t`${request.origin}/${request.pathname.join('/')}${HTTPClient.queryStringify(request.queryParams)}`,\n    \t\t);\n\n    \t\tif (request.headers) {\n    \t\t\tfor (const [key, value] of Object.entries(request.headers)) {\n    \t\t\t\txhr.setRequestHeader(key, value);\n    \t\t\t}\n    \t\t}\n\n    \t\txhr.setRequestHeader('Content-Type', 'application/json');\n\n    \t\tconst body = typeof request.body === 'object'\n    \t\t\t? JSON.stringify(request.body)\n    \t\t\t: request.body;\n\n    \t\txhr.send(body);\n    \t});\n    }\n\n    private getXMLHttpRequestHandler<body>(resolve: Function, reject: Function): requestHandler {\n    \tconst {interseptors} = this;\n\n    \treturn function (this: XMLHttpRequest, _event: ProgressEvent) {\n    \t\tif (interseptors) {\n    \t\t\tfor (const interseptor of interseptors) {\n    \t\t\t\tinterseptor.interceptRequest(this, _event);\n    \t\t\t}\n    \t\t}\n\n    \t\tif (this.status >= 200 && this.status < 300) {\n    \t\t\tresolve(HTTPClient.mapXMLHttpRequestToResponse<body>(this));\n    \t\t} else {\n    \t\t\treject(HTTPClient.mapXMLHttpRequestToResponse<body>(this));\n    \t\t}\n    \t};\n    }\n}\n","import {Interceptor} from '../interfaces/interceptor';\nimport {AppHTTPRequest, HTTPClient, HTTPResponse} from './http-client';\n\nexport class HTTPClientModule {\n    private readonly httpClient: HTTPClient;\n    private readonly mutualPathname: string[];\n\n    constructor(origin: string, mutualPathname: string[] = [], interceptors: Interceptor[] = []) {\n    \tthis.httpClient = new HTTPClient(origin, interceptors);\n    \tthis.mutualPathname = mutualPathname;\n    }\n\n    protected upload<body>(request: AppHTTPRequest): Promise<HTTPResponse<body>> {\n    \tconst moduleRequest = {...request};\n\n    \tmoduleRequest.pathname = this.mutualPathname.concat(moduleRequest.pathname);\n\n    \treturn this.httpClient.upload<body>(moduleRequest);\n    }\n}\n","import {HTTPMethod} from '../../../utils/api/http-method';\nimport {HTTPClientModule} from '../../../utils/api/http-client-module';\nimport {HTTPResponse} from '../../../utils/api/http-client';\nimport {userData} from '../../../store/interfaces/authorization-state.interface';\nimport {Interceptor} from '../../../utils/interfaces/interceptor';\n\nexport type pushUserData = Omit<Omit<userData, 'id'>, 'avatarUrl'>;\nexport type registrationData = Omit<pushUserData, 'display_name'>;\n\nexport interface authorizationData {\n    login: string,\n    password: string,\n}\n\nexport class AuthHTTPClientModule extends HTTPClientModule {\n\tprivate static readonly moduleMutualPathname = ['auth'];\n\n\tconstructor(origin: string, mutualPathname: string[], interseptors: Interceptor[] = []) {\n\t\tsuper(\n\t\t\torigin,\n\t\t\tmutualPathname.concat(AuthHTTPClientModule.moduleMutualPathname),\n\t\t\tinterseptors,\n\t\t);\n\t}\n\n\tpublic registration(body: registrationData): Promise<HTTPResponse<{id: number}>> {\n\t\treturn this.upload({\n\t\t\tmethod: HTTPMethod.POST,\n\t\t\tpathname: ['signup'],\n\t\t\tbody,\n\t\t});\n\t}\n\n\tpublic authorization(body: authorizationData): Promise<HTTPResponse<undefined>> {\n\t\treturn this.upload({\n\t\t\tmethod: HTTPMethod.POST,\n\t\t\tpathname: ['signin'],\n\t\t\tbody,\n\t\t});\n\t}\n\n\tpublic logout(): Promise<HTTPResponse<undefined>> {\n\t\treturn this.upload({\n\t\t\tmethod: HTTPMethod.POST,\n\t\t\tpathname: ['logout'],\n\t\t});\n\t}\n\n\tpublic getUserData(): Promise<HTTPResponse<userData>> {\n\t\treturn this.upload({\n\t\t\tmethod: HTTPMethod.GET,\n\t\t\tpathname: ['user'],\n\t\t});\n\t}\n}\n","import {addChatUsers, chatsList, chatToken, createChat, deleteChat, deleteChatUsers} from '../../../store/interfaces/chats-state.interface';\nimport {HTTPResponse} from '../../../utils/api/http-client';\nimport {HTTPClientModule} from '../../../utils/api/http-client-module';\nimport {HTTPMethod} from '../../../utils/api/http-method';\nimport {Interceptor} from '../../../utils/interfaces/interceptor';\n\nconst DEFAULT_CHATS_LIMIT = 30;\n\nexport type uploadChatsQueryParams = {offset?: number, limit?: number, title?: string};\n\nexport class ChatsHttpClientModule extends HTTPClientModule {\n    private static readonly moduleMutualPathname = ['chats'];\n\n    constructor(origin: string, mutualPathname: string[], interseptors: Interceptor[] = []) {\n    \tsuper(\n    \t\torigin,\n    \t\tmutualPathname.concat(ChatsHttpClientModule.moduleMutualPathname),\n    \t\tinterseptors,\n    \t);\n    }\n\n    public uploadChats(\n    \tqueryParams: uploadChatsQueryParams = {limit: DEFAULT_CHATS_LIMIT},\n    ): Promise<HTTPResponse<chatsList>> {\n    \tif (!queryParams.limit) {\n    \t\tqueryParams.limit = DEFAULT_CHATS_LIMIT;\n    \t}\n\n    \treturn this.upload({\n    \t\tmethod: HTTPMethod.GET,\n    \t\tpathname: [],\n    \t\tqueryParams,\n    \t});\n    }\n\n    public createChat(title: string): Promise<HTTPResponse<createChat>> {\n    \treturn this.upload({\n    \t\tmethod: HTTPMethod.POST,\n    \t\tpathname: [],\n    \t\tbody: {title},\n    \t});\n    }\n\n    public deleteChat(chatId: number): Promise<HTTPResponse<deleteChat>> {\n    \treturn this.upload({\n    \t\tmethod: HTTPMethod.DELETE,\n    \t\tpathname: [],\n    \t\tbody: {chatId},\n    \t});\n    }\n\n    public getTokenForChat(chatId: number): Promise<HTTPResponse<{token: chatToken}>> {\n    \treturn this.upload({\n    \t\tmethod: HTTPMethod.POST,\n    \t\tpathname: ['token', String(chatId)],\n    \t});\n    }\n\n    public deleteUsersFormChat(\n    \tusersIds: number[],\n    \tchatId: number,\n    ): Promise<HTTPResponse<deleteChatUsers>> {\n    \treturn this.upload({\n    \t\tmethod: HTTPMethod.DELETE,\n    \t\tpathname: ['users'],\n    \t\tbody: {usersIds, chatId},\n    \t});\n    }\n\n    public addUsersToChat(usersIds: number[], chatId: number): Promise<HTTPResponse<addChatUsers>> {\n    \treturn this.upload({\n    \t\tmethod: HTTPMethod.PUT,\n    \t\tpathname: ['users'],\n    \t\tbody: {usersIds, chatId},\n    \t});\n    }\n}\n","import {userData} from '../../../store/interfaces/authorization-state.interface';\nimport {HTTPResponse} from '../../../utils/api/http-client';\nimport {HTTPClientModule} from '../../../utils/api/http-client-module';\nimport {HTTPMethod} from '../../../utils/api/http-method';\nimport {Interceptor} from '../../../utils/interfaces/interceptor';\nimport {pushUserData} from './auth-http-client-module';\n\nexport type changeUserData = pushUserData;\n\nexport interface changePasswordData {\n    newPassword: string;\n    oldPassword: string;\n}\n\nexport class UserHTTPClientModule extends HTTPClientModule {\n\tprivate static readonly moduleMutualPathname = ['user'];\n\n\tconstructor(origin: string, mutualPathname: string[], interseptors: Interceptor[] = []) {\n\t\tsuper(\n\t\t\torigin,\n\t\t\tmutualPathname.concat(UserHTTPClientModule.moduleMutualPathname),\n\t\t\tinterseptors,\n\t\t);\n\t}\n\n\tpublic changeData(body: changeUserData): Promise<HTTPResponse<userData>> {\n\t\treturn this.upload({\n\t\t\tmethod: HTTPMethod.PUT,\n\t\t\tpathname: ['profile'],\n\t\t\tbody,\n\t\t});\n\t}\n\n\tpublic changePassword(body: changePasswordData): Promise<HTTPResponse<undefined>> {\n\t\treturn this.upload({\n\t\t\tmethod: HTTPMethod.PUT,\n\t\t\tpathname: ['password'],\n\t\t\tbody,\n\t\t});\n\t}\n}\n","import {AuthInterceptor} from '../../interceptor/auth-interceptor';\nimport {AuthHTTPClientModule} from './modules/auth-http-client-module';\nimport {ChatsHttpClientModule} from './modules/chats-http-client-module';\nimport {UserHTTPClientModule} from './modules/user-http-client-module';\n\nlet instance: HTTPClientFacade;\n\nexport const API_SERVER = 'ya-praktikum.tech';\n\nexport class HTTPClientFacade {\n    public readonly auth: AuthHTTPClientModule;\n    public readonly user: UserHTTPClientModule;\n    public readonly chats: ChatsHttpClientModule;\n\n    private readonly mutualPathname = ['api', 'v2'];\n    private readonly origin = `https://${API_SERVER}`;\n    private readonly interseptors = [\n    \tnew AuthInterceptor(),\n    ];\n\n    constructor() {\n    \tif (instance) {\n    \t\treturn instance;\n    \t}\n\n    \tinstance = this;\n\n    \tthis.auth = new AuthHTTPClientModule(this.origin, this.mutualPathname, this.interseptors);\n    \tthis.user = new UserHTTPClientModule(this.origin, this.mutualPathname, this.interseptors);\n    \tthis.chats = new ChatsHttpClientModule(this.origin, this.mutualPathname, this.interseptors);\n    }\n}\n","import {\n\tUploadAuthTokenAction,\n\tUploadedAuthTokenAction,\n\tUploadedLogoutAction,\n\tUploadedUserDataAction,\n\tUploadErrorAuthTokenAction,\n\tUploadErrorLogoutAction,\n\tUploadErrorUserDataAction,\n\tUploadLogoutAction,\n\tUploadUserDataAction} from '../store/actions/authorization.actions';\nimport {dataStatus} from '../store/enums/data-status.enum';\nimport {selectIsAuthorized} from '../store/selectors/authorization/select-is-authorized';\nimport {selectUserData} from '../store/selectors/authorization/select-user-data';\nimport {selectDataStatus} from '../store/selectors/data/select-status';\nimport {Store} from '../store/store';\nimport {HTTPClientFacade} from './api/http-client.facade';\nimport {authorizationData, registrationData} from './api/modules/auth-http-client-module';\n\nlet instance: AuthService;\n\nexport class AuthService {\n    private readonly httpClientFacade: HTTPClientFacade;\n    private readonly store: Store;\n\n    constructor() {\n    \tif (instance) {\n    \t\treturn instance;\n    \t}\n\n    \tinstance = this;\n\n    \tthis.httpClientFacade = new HTTPClientFacade();\n    \tthis.store = new Store();\n    }\n\n    public authorization(authData: authorizationData): Promise<void> {\n    \treturn (\n    \t\tselectIsAuthorized(this.store.state)\n    \t\t\t? this.logout().catch()\n    \t\t\t: Promise.resolve()\n    \t)\n    \t\t.then(() => this.store.dispatch(new UploadAuthTokenAction()))\n    \t\t.then(() => this.httpClientFacade.auth.authorization(authData))\n    \t\t.then(() => this.store.dispatch(new UploadedAuthTokenAction()))\n    \t\t.catch(error => {\n    \t\t\tthis.store.dispatch(new UploadErrorAuthTokenAction(error));\n\n    \t\t\tthrow error;\n    \t\t});\n    }\n\n    public registration(registrationData: registrationData): Promise<void> {\n    \treturn (\n    \t\tselectIsAuthorized(this.store.state)\n    \t\t\t? this.logout().catch()\n    \t\t\t: Promise.resolve()\n    \t)\n    \t\t.then(() => this.store.dispatch(new UploadAuthTokenAction()))\n    \t\t.then(() => this.httpClientFacade.auth.registration(registrationData))\n    \t\t.then(() => this.store.dispatch(new UploadedAuthTokenAction()))\n    \t\t.catch(error => {\n    \t\t\tthis.store.dispatch(new UploadErrorAuthTokenAction(error));\n\n    \t\t\tthrow error;\n    \t\t});\n    }\n\n    public logout(): Promise<void> {\n    \tthis.store.dispatch(new UploadLogoutAction());\n\n    \treturn this.httpClientFacade.auth.logout()\n    \t\t.then(() => this.store.dispatch(new UploadedLogoutAction()))\n    \t\t.catch(error => {\n    \t\t\tthis.store.dispatch(new UploadErrorLogoutAction(error));\n\n    \t\t\tthrow error;\n    \t\t});\n    }\n\n    public uploadUserData(): Promise<void> {\n    \tthis.store.dispatch(new UploadUserDataAction());\n\n    \treturn this.httpClientFacade.auth.getUserData()\n    \t\t.then(response => this.store.dispatch(new UploadedUserDataAction(response.body)))\n    \t\t.catch(error => {\n    \t\t\tthis.store.dispatch(new UploadErrorUserDataAction(error));\n\n    \t\t\tthrow error;\n    \t\t});\n    }\n\n    public uploadUserDataIfNot(): Promise<void> {\n    \treturn selectDataStatus(selectUserData(this.store.state)) === dataStatus.valid\n    \t\t? Promise.resolve()\n    \t\t: this.uploadUserData();\n    }\n}\n","import {AuthService} from '../../../service/auth.service';\nimport {pages} from '../../../service/router/pages.config';\nimport {RouterService} from '../../../service/router/router.service';\n\nlet instance: MainPageManager;\n\nexport class MainPageManager {\n    private readonly routerService: RouterService<{}>;\n    private readonly authService: AuthService;\n    // Private readonly activeChatsService: ActiveChatsService;\n\n    constructor() {\n    \tif (instance) {\n    \t\treturn instance;\n    \t}\n\n    \tinstance = this;\n\n    \tthis.routerService = new RouterService();\n    \tthis.authService = new AuthService();\n    \t// This.activeChatsService = new ActiveChatsService();\n    }\n\n    public navigateToAuth(): void {\n    \tthis.routerService.navigateTo(pages.auth);\n    }\n\n    public navigateToProfile(): void {\n    \tthis.routerService.navigateTo(pages.profile);\n    }\n\n    public logout(): void {\n    \tthis.authService.logout()\n    \t\t.catch()\n    \t\t.then(() => this.navigateToAuth());\n    }\n}\n","import {component, CustomHTMLElement} from '../../utils/component';\nimport {template} from './page-main.tmpl';\n\nimport './page-main.less';\nimport {AuthGuard} from '../../guards/auth-guard';\nimport {MainPageManager} from './service/main-page-manager';\n\n@component({\n\tname: 'page-main',\n\ttemplate,\n\tguards: [AuthGuard],\n})\nexport class PageMain implements CustomHTMLElement {\n        private readonly mainPageManager: MainPageManager;\n\n        constructor() {\n        \tthis.mainPageManager = new MainPageManager();\n        }\n\n        public onInit(): void {\n        }\n\n        public navigateToAuth(): void {\n        \tthis.mainPageManager.navigateToAuth();\n        }\n\n        public navigateToProfile(): void {\n        \tthis.mainPageManager.navigateToProfile();\n        }\n\n        public logout(): void {\n        \tthis.mainPageManager.logout();\n        }\n}\n","export const template = `\n    <main>\n        <h1>\n            {{$title}}\n        </h1>\n\n        <app-form name=\"authorization\" hidden={{$isRegistration}} formGroup=[[authForm]]>\n            <app-input slot=\"field\" formControl=[[authForm.controls.login]]>\n                <span slot=\"label\">Логин</span>\n            </app-input>\n            <app-input slot=\"field\" formControl=[[authForm.controls.password]]>\n                <span slot=\"label\">Пароль</span>\n            </app-input>\n\n            <app-button slot=\"submit\" class=\"space-top_8\" @disabledclick={{onDisabledClickFormAuthorization()}} disabled={{$isDisabledAuthorizationForm}} appearance=\"primary\">\n                <span slot=\"label\">\n                    Авторизироваться\n                </span>\n            </app-button>\n        </app-form>\n\n        <app-form name=\"registration\" hidden={{$isAuthorization}} formGroup=[[registrationForm]]>\n            <app-input slot=\"field\" formControl=[[registrationForm.controls.first_name]]>\n                <span slot=\"label\">Имя</span>\n            </app-input>\n            <app-input slot=\"field\" formControl=[[registrationForm.controls.second_name]]>\n                <span slot=\"label\">Фамилия</span>    \n            </app-input>\n            <app-input slot=\"field\" formControl=[[registrationForm.controls.login]]>\n                <span slot=\"label\">Логин</span>\n            </app-input>\n            <app-input slot=\"field\" formControl=[[registrationForm.controls.email]]>\n                <span slot=\"label\">Почта</span>    \n            </app-input>\n            <app-input slot=\"field\" formControl=[[registrationForm.controls.password]]>\n                <span slot=\"label\">Пароль</span>    \n            </app-input>\n            <app-input slot=\"field\" formControl=[[registrationForm.controls.phone]]>\n                <span slot=\"label\">Телефон</span> \n            </app-input>\n\n            <app-button slot=\"submit\" class=\"space-top_8\" @disabledclick={{onDisabledClickFormRegistration()}} disabled={{$isDisabledRegistrationForm}} appearance=\"primary\">\n                <span slot=\"label\">\n                    Регистрация\n                </span>\n            </app-button>\n        </app-form>\n\n        <app-button @click={{navigateToAuthorization()}} appearance=\"secondary\" hidden={{$isRegistration}}>\n            <span slot=\"label\">\n                Войти\n            </span>\n        </app-button>\n\n        <app-button @click={{navigateToRegistration()}} appearance=\"secondary\" hidden={{$isAuthorization}}>\n            <span slot=\"label\">\n                Нет акаунта?\n            </span>\n    </app-button>\n    </main>\n`;\n","export const transform = {\n\trotate(deg: number): string {\n\t\treturn `rotate(${deg}deg)`;\n\t},\n\n\tscale(size: number): string {\n\t\treturn `scale(${size})`;\n\t},\n};\n","import {AppAnimation} from '../app-animation';\nimport {transform} from '../animation-utils/transform.functions';\n\nexport class ShakingAnimation implements AppAnimation {\n    public readonly keyFrames = [\n    \t{transform: transform.rotate(0)},\n    \t{transform: transform.rotate(1)},\n    \t{transform: transform.rotate(-1)},\n    \t{transform: transform.rotate(0)},\n    ];\n\n    public readonly keyframeAnimationOptions = {\n    \tduration: 70,\n    \titerations: 10,\n    };\n}\n","import {AppAnimation} from '../animation/app-animation';\nimport {Observable} from '../observeble/observeble';\nimport {Subject} from '../observeble/subject';\nimport {ValidatorError} from './validator-error';\n\nexport type formValue = unknown;\n\nexport type formValidator = (value: formValue) => null | ValidatorError;\nexport type asyncFormValidator =\n\t($value: Observable<formValue>) => Observable<null | ValidatorError>;\n\nexport interface FormControlOptions {\n    value?: string;\n    validators?: Array<formValidator>;\n\tasyncValidators?: Array<asyncFormValidator>;\n}\n\nexport interface FormControlConfig extends FormControlOptions {\n    name: string;\n}\n\nexport enum FormStatusType {\n    valid = 'VALID',\n    invalid = 'INVALID',\n}\n\nexport interface FormStatus {\n    status: FormStatusType;\n    errors?: ValidatorError[];\n}\n\nexport class FormControl {\n    public readonly name: string;\n\n    private readonly $value: Subject<formValue>;\n    private readonly validators: Array<formValidator>;\n\tprivate readonly asyncValidators: Array<asyncFormValidator>;\n    private readonly touched: Subject<boolean> = new Subject<boolean>(false);\n    private readonly hasFocus: Subject<boolean> = new Subject<boolean>(false);\n\tprivate readonly disabled: Subject<boolean> = new Subject<boolean>(false);\n\tprivate readonly animations: Subject<AppAnimation> = new Subject<AppAnimation>();\n\n    private _value: formValue;\n\n    constructor(config: FormControlConfig) {\n    \tthis.$value = new Subject<formValue>(config.value || '');\n    \tthis._value = config.value;\n    \tthis.name = config.name;\n    \tthis.validators = config.validators || [];\n    \tthis.asyncValidators = config.asyncValidators || [];\n    }\n\n    public get value(): formValue {\n    \treturn this._value;\n    }\n\n    public get $valueChanged(): Observable<formValue> {\n    \treturn this.$value.asObserveble();\n    }\n\n    public get $statusChanged(): Observable<FormStatus> {\n    \treturn Observable.all([\n    \t\tthis.$valueChanged,\n    \t\t...this.asyncValidators.map(validate => validate(this.$valueChanged)),\n    \t])\n    \t\t.map(([value, ...asyncValidatorsResults]) =>\n    \t\t\tthis.mapValueToStatus(\n    \t\t\t\tvalue,\n\t\t\t\t\tasyncValidatorsResults as Array<null | ValidatorError>,\n    \t\t\t),\n    \t\t)\n    \t\t.uniqueNext(true, (last, next) => FormControl.hasDiffInStatuses(last, next));\n    }\n\n    public get $touched(): Observable<boolean> {\n    \treturn this.touched.asObserveble();\n    }\n\n    public get $changeFocus(): Observable<boolean> {\n    \treturn this.hasFocus.asObserveble()\n    \t\t.uniqueNext();\n    }\n\n    public get $isValid(): Observable<boolean> {\n    \treturn this.$statusChanged.map(status => status.status === FormStatusType.valid)\n    \t\t.uniqueNext();\n    }\n\n    public get $disabled(): Observable<boolean> {\n    \treturn this.disabled.asObserveble()\n    \t\t.uniqueNext();\n    }\n\n    public get $animations(): Observable<AppAnimation> {\n    \treturn this.animations.asObserveble();\n    }\n\n    public next(value: formValue): void {\n    \tthis._value = value;\n    \tthis.$value.next(value || '');\n    }\n\n    public touch(): void {\n    \tthis.touched.next(true);\n    }\n\n    public disable(disabled: boolean): void {\n    \tthis.disabled.next(disabled);\n    }\n\n    public changeFocus(hasFocus: boolean): void {\n    \tthis.hasFocus.next(hasFocus);\n    }\n\n    public animate(animations: AppAnimation): void {\n    \tthis.animations.next(animations);\n    }\n\n    private static hasDiffInStatuses(last: FormStatus, next: FormStatus): boolean {\n    \tconst hasStatusDiff = last.status !== next.status;\n\n    \treturn hasStatusDiff || FormControl.hasErrorsDiff(last.errors, next.errors);\n    }\n\n    private static hasErrorsDiff(\n    \tlast: ValidatorError[] | undefined, next: ValidatorError[] | undefined): boolean {\n    \tif ((last && !next) || (!last && next)) {\n    \t\treturn true;\n    \t}\n\n    \tif (last === undefined && next === undefined) {\n    \t\treturn false;\n    \t}\n\n    \tif (last!.length !== next!.length) {\n    \t\treturn true;\n    \t}\n\n    \tfor (let index = 0; index < last!.length; index++) {\n    \t\tif (!last![index].equals(next![index])) {\n    \t\t\treturn true;\n    \t\t}\n    \t}\n\n    \treturn false;\n    }\n\n    private mapValueToStatus(\n    \tvalue: formValue,\n    \tasyncValidatorsResults: Array<ValidatorError | null>,\n    ): FormStatus {\n    \tlet errors = [];\n\n    \tfor (const validator of this.validators) {\n    \t\tconst error = validator(value);\n\n    \t\tif (error) {\n    \t\t\terrors.push(error);\n    \t\t}\n    \t}\n\n    \terrors = errors.concat(\n\t\t\tasyncValidatorsResults.filter(error => Boolean(error)) as ValidatorError[],\n    \t);\n\n    \tif (errors.length === 0) {\n    \t\treturn {status: FormStatusType.valid};\n    \t}\n\n    \treturn {\n    \t\tstatus: FormStatusType.invalid,\n    \t\terrors,\n    \t};\n    }\n}\n","import {ShakingAnimation} from '../animation/animations/shaking-animation';\nimport {Observable} from '../observeble/observeble';\nimport {Subject} from '../observeble/subject';\nimport {FormControl, FormControlOptions, FormStatusType, formValue} from './form-control';\nimport {ValidatorError} from './validator-error';\n\ntype formStatus<Form> = {\n\tstatus: FormStatusType.invalid;\n\terrors: {[key in keyof Form]: ValidatorError[]};\n}\n| {\n\tstatus: FormStatusType.valid;\n};\n\ntype formFieldValidator<Form> = {\n\ttargets: Array<keyof Form>;\n\tvalidators: Array<(form: Form) => ValidatorError | null>;\n}\n\nexport interface FormGroupConfig<Form extends {[key: string]: formValue}> {\n    controls?: Record<keyof Form, FormControlOptions>;\n\tfieldValidators?: formFieldValidator<Form>[];\n\n}\n\nexport class FormGroup<Form extends {[key: string]: formValue}> {\n    public readonly controls: Record<keyof Form, FormControl>;\n\n\tprivate readonly _$submit: Subject<Record<keyof Form, formValue>> =\n\t\tnew Subject<Record<keyof Form, formValue>>();\n\n\tconstructor(config: FormGroupConfig<Form>) {\n    \tconst controls = {} as Record<keyof Form, FormControl>;\n\n    \tif (config.controls) {\n    \t\tfor (const [name, formConfig] of Object.entries(config.controls)) {\n    \t\t\tcontrols[name as keyof Form] = this.initFormControl(name, formConfig, config);\n    \t\t}\n    \t}\n\n    \tthis.controls = controls;\n\t}\n\n\tget value(): Record<keyof Form, formValue> {\n    \treturn Object.values(this.controls).reduce((out, control) => {\n    \t\t(out[control.name] as keyof Form) = String(control.value);\n\n    \t\treturn out;\n    \t}, {} as Record<keyof Form, formValue>);\n\t}\n\n\tpublic get $submit(): Observable<Record<keyof Form, formValue>> {\n\t\treturn this._$submit.asObserveble();\n\t}\n\n\tpublic get $valueChanged(): Observable<Form> {\n    \treturn Observable.concat(\n    \t\tObject.values(this.controls).map(control =>\n    \t\t\tcontrol.$valueChanged\n    \t\t\t\t.map(value => ({value, name: control.name})),\n    \t\t),\n    \t).map(entrys => entrys.reduce((out, entry) => {\n\t\t\tif (entry) {\n    \t\t\t(out[entry.name] as keyof Form) = String(entry.value);\n\t\t\t}\n\n    \t\treturn out;\n    \t}, {} as Form));\n\t}\n\n\tpublic get $statusChanged(): Observable<formStatus<Form>> {\n    \treturn Observable.concat(\n    \t\tObject.values(this.controls).map(control =>\n    \t\t\tcontrol.$statusChanged\n    \t\t\t\t.map(status => ({...status, name: control.name})),\n    \t\t),\n    \t).map(statuses => {\n    \t\tconst isValid = statuses.every(status => status!.status === FormStatusType.valid);\n\n    \t\tif (isValid) {\n    \t\t\treturn {status: FormStatusType.valid};\n    \t\t}\n\n    \t\tconst errors = statuses.reduce((out, status) => {\n    \t\t\tif (status && status.errors) {\n    \t\t\t\tout[status.name as keyof Form] = status.errors;\n    \t\t\t}\n\n    \t\t\treturn out;\n    \t\t}, {} as {[key in keyof Form]: ValidatorError[]});\n\n    \t\treturn {status: FormStatusType.invalid, errors};\n    \t});\n\t}\n\n\tpublic get $isValid(): Observable<boolean> {\n    \treturn Observable.concat(Object.values(this.controls).map(control => control.$isValid))\n    \t\t.map(isValidFieldsArray => isValidFieldsArray.every(isValid => isValid));\n\t}\n\n\tpublic touch(): void {\n    \tfor (const control of Object.values(this.controls)) {\n    \t\tcontrol.touch();\n    \t}\n\t}\n\n\tpublic disable(disabled: boolean): void {\n    \tfor (const control of Object.values(this.controls)) {\n    \t\tcontrol.disable(disabled);\n    \t}\n\t}\n\n\tpublic submit(value: Record<keyof Form, formValue>): void {\n\t\tthis._$submit.next(value);\n\t}\n\n\tpublic next(formValue: Record<keyof Form, formValue>): void {\n\t\tfor (const [key, value] of Object.entries(formValue)) {\n\t\t\tif (this.controls[key]) {\n\t\t\t\tthis.controls[key].next(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic shakingFirstInvalidField(): void {\n\t\tObservable.all(\n\t\t\tObject.values(this.controls)\n\t\t\t\t.map(control => control.$isValid.map(isValid => ({isValid, name: control.name}))),\n\t\t)\n\t\t\t.only(1)\n\t\t\t.subscribe(isValidObjArray => {\n\t\t\t\tconst firstInvalidControlsName\n\t\t\t\t\t= isValidObjArray.find(isValidObj => !isValidObj.isValid)?.name;\n\n\t\t\t\tif (firstInvalidControlsName) {\n\t\t\t\t\tthis.controls[firstInvalidControlsName].animate(new ShakingAnimation());\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tpublic initFormControl(\n\t\tname: string,\n\t\tformConfig: FormControlOptions,\n\t\tconfig: FormGroupConfig<Form>,\n\t): FormControl {\n\t\tif (config.fieldValidators) {\n\t\t\tconst formFieldValidators = config.fieldValidators\n\t\t\t\t.filter(fieldValidator => fieldValidator.targets.includes(name))\n\t\t\t\t.map(fieldValidator => fieldValidator.validators)\n\t\t\t\t.reduce((out, validators) => out.concat(validators), []);\n\n\t\t\tif (formFieldValidators.length !== 0) {\n\t\t\t\tconst asyncValidators = [];\n\n\t\t\t\tfor (const validator of formFieldValidators) {\n\t\t\t\t\tasyncValidators.push(() => this.$valueChanged.map(validator));\n\t\t\t\t}\n\n\t\t\t\tformConfig.asyncValidators\n\t\t\t\t\t= (formConfig.asyncValidators || []).concat(asyncValidators);\n\t\t\t}\n\t\t}\n\n\t\treturn new FormControl({name, ...formConfig});\n\t}\n}\n","export enum ValidationErrorType {\n    shown = 'SHOWN',\n    hidden = 'HIDDEN',\n}\n\nexport class ValidatorError extends Error {\n    public readonly type: ValidationErrorType;\n\n    constructor(message: string, type: ValidationErrorType = ValidationErrorType.shown) {\n    \tsuper(message);\n\n    \tthis.type = type;\n    }\n\n    public equals(other: ValidatorError): boolean {\n    \treturn other.type === this.type && other.message === this.message;\n    }\n}\n","import {formValidator, formValue} from './form-control';\nimport {ValidatorError} from './validator-error';\n\nconst EMAIL = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nconst defaultMessages = {\n\tempty: 'Поле должно быть заполнено',\n\trequired: 'Поле заполнено неверно',\n\tmaxLength: (length: number) => `Длинна поля не должна быть больше ${length}`,\n\tminLength: (length: number) => `Длинна поля не должна быть меньше ${length}`,\n\tnoSpaces: 'В поле не должно быть пробелов',\n\temail: 'Почта должна быть в формате my-email@domen.ru',\n};\n\nexport class Validators {\n\tpublic static empty(error?: ValidatorError): formValidator {\n\t\treturn function (value: formValue): null | ValidatorError {\n\t\t\treturn value\n\t\t\t\t? null\n\t\t\t\t: error || new ValidatorError(defaultMessages.empty);\n\t\t};\n\t}\n\n\tpublic static required(regExp: RegExp, error?: ValidatorError): formValidator {\n\t\treturn function (value: formValue): null | ValidatorError {\n\t\t\treturn regExp.test(Validators.nonNullable(value) as string)\n\t\t\t\t? null\n\t\t\t\t: error || new ValidatorError(defaultMessages.required);\n\t\t};\n\t}\n\n\tpublic static maxLength(length: number, error?: ValidatorError): formValidator {\n\t\treturn function (value: formValue): null | ValidatorError {\n\t\t\treturn Validators.toString(value).length > length\n\t\t\t\t? error || new ValidatorError(defaultMessages.maxLength(length))\n\t\t\t\t: null;\n\t\t};\n\t}\n\n\tpublic static minLength(length: number, error?: ValidatorError): formValidator {\n\t\treturn function (value: formValue): null | ValidatorError {\n\t\t\treturn Validators.toString(value).length < length\n\t\t\t\t? error || new ValidatorError(defaultMessages.minLength(length))\n\t\t\t\t: null;\n\t\t};\n\t}\n\n\tpublic static noSpaces(error?: ValidatorError): formValidator {\n\t\treturn function (value: formValue): null | ValidatorError {\n\t\t\treturn /\\s/g.test(Validators.toString(value).trim())\n\t\t\t\t? error || new ValidatorError(defaultMessages.noSpaces)\n\t\t\t\t: null;\n\t\t};\n\t}\n\n\tpublic static email(error?: ValidatorError): formValidator {\n\t\treturn function (value: formValue): null | ValidatorError {\n\t\t\treturn EMAIL.test(Validators.toString(value).toLowerCase())\n\t\t\t\t? null\n\t\t\t\t: error || new ValidatorError(defaultMessages.email);\n\t\t};\n\t}\n\n\tprivate static nonNullable(value: formValue): NonNullable<formValue> {\n\t\treturn value === undefined || value === null ? '' : value;\n\t}\n\n\tprivate static toString(value: formValue): string {\n\t\treturn String(Validators.nonNullable(value));\n\t}\n}\n","import {ValidatorError} from '../utils/form/validator-error';\nimport {Validators} from '../utils/form/validators';\n\nconst defaultValidators = [Validators.noSpaces(), Validators.maxLength(50), Validators.empty()];\n\nexport const formValidators = {\n\tpassword: [...defaultValidators, Validators.minLength(6)],\n\tlogin: [...defaultValidators, Validators.minLength(4)],\n\tfirst_name: [...defaultValidators],\n\tsecond_name: [...defaultValidators],\n\temail: [...defaultValidators, Validators.email()],\n\tphone: [\n\t\t...defaultValidators,\n\t\tValidators.required(\n\t\t\t/^\\+?\\d+$/,\n\t\t\tnew ValidatorError('Телефон может содержать только цифры и \"+\" в начале'),\n\t\t),\n\t],\n\tdisplay_name: [...defaultValidators, Validators.minLength(4)],\n};\n","export const template = `\n    <label for={{$name}} status={{$inputStatus}}>\n        <slot name=\"label\" instead-of-text={{$labelIsInsteadOfText}}></slot>\n    </label>\n    <input type=\"text\" name={{$name}} id={{$name}} disabled={{$disabled}} @focus={{onFocus}} @blur={{onBlur}} @input={{onInput}}>\n    <div underline={{$inputStatus}}></div>\n    <p transparent={{$needHiddenErrors}} class=\"error\">\n        {{$errorMessage}}\n    </p>\n`;\n","import {AppAnimation} from '../app-animation';\n\nexport function playAnimation(element: Element, animation: AppAnimation): Promise<void> {\n\treturn new Promise<void>(resolve => {\n\t\tif (animation.onStart) {\n\t\t\tfor (const onStartFunction of animation.onStart) {\n\t\t\t\tonStartFunction(element);\n\t\t\t}\n\t\t}\n\n\t\tresolve();\n\t})\n\t\t.then(() =>\n\t\t\telement.animate(animation.keyFrames, animation.keyframeAnimationOptions).finished,\n\t\t)\n\t\t.then(() => {\n\t\t\tif (animation.onFinish) {\n\t\t\t\tfor (const onFinishFunction of animation.onFinish) {\n\t\t\t\t\tonFinishFunction(element);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n}\n","import {component, CustomHTMLElement} from '../../utils/component';\n\nimport {template} from './app-input.tmpl';\n\nimport './app-input.less';\nimport {FormControl} from '../../utils/form/form-control';\nimport {Observable} from '../../utils/observeble/observeble';\nimport {ValidationErrorType} from '../../utils/form/validator-error';\nimport {playAnimation} from '../../utils/animation/animation-utils/play-animation';\nimport {Subject} from '../../utils/observeble/subject';\n\n@component({\n\tname: 'app-input',\n\ttemplate,\n})\nexport class AppInput implements CustomHTMLElement {\n    private _$name: Subject<string | boolean> = new Subject<string | boolean>();\n    public formControl: FormControl;\n    private input: HTMLInputElement;\n\n    public onInit(): void {\n    \tthis._$name.next(this.formControl ? this.formControl.name : false);\n    }\n\n    public get $name(): Observable<string | boolean> {\n    \treturn this._$name.asObserveble();\n    }\n\n    // TODO: Разбить на методы\n    public onRendered(element: HTMLElement): void {\n    \tthis.input = element.querySelector('input')!;\n\n    \tif (this.formControl) {\n    \t\tthis.formControl.$valueChanged.subscribe(value => {\n    \t\t\tthis.input.value = value as string || '';\n    \t\t});\n    \t} else {\n    \t\tthis.formControl = new FormControl({name: ''});\n    \t}\n\n    \tObservable.event(element, 'click').subscribe(() => this.setFocusForInput());\n\n    \tthis.formControl.$animations.subscribe(animation => playAnimation(element, animation));\n    }\n\n    public get $hasFocus(): Observable<boolean> {\n    \treturn this.formControl.$changeFocus;\n    }\n\n    public get $hasErrors(): Observable<boolean> {\n    \treturn this.formControl.$statusChanged.map(\n        \tstatus =>\n    \t\t\tBoolean(status?.errors)\n\t\t\t\t&& status!.errors!.some(\n\t\t\t\t\terror => error.type === ValidationErrorType.shown,\n\t\t\t\t),\n    \t);\n    }\n\n    public get $disabled(): Observable<boolean> {\n    \treturn this.formControl.$disabled;\n    }\n\n    public get $errorMessage(): Observable<string> {\n    \treturn this.formControl.$statusChanged\n    \t\t.map(\n    \t\t\tstatus =>\n    \t\t\t\tstatus.errors?.find(error => error.type === ValidationErrorType.shown)?.message\n\t\t\t\t\t|| '',\n    \t\t)\n    \t// WARNING: Благодаря этому, текст ошибки не исчезает мгновенно,\n    \t// а становится прозрачным c анимацией.\n    \t\t.filter(message => Boolean(message));\n    }\n\n    public get $needHiddenErrors(): Observable<boolean> {\n    \treturn Observable.all([\n    \t\tthis.$hasErrors,\n    \t\tthis.formControl.$touched,\n    \t\tthis.formControl.$disabled,\n    \t])\n    \t\t.map(([hasErrors, touched, disabled]) => !hasErrors || !touched || disabled);\n    }\n\n    public get $inputStatus(): Observable<string> {\n    \treturn Observable.all([\n    \t\tthis.$hasErrors,\n    \t\tthis.formControl.$changeFocus,\n    \t\tthis.formControl.$touched,\n    \t\tthis.formControl.$disabled,\n    \t])\n    \t\t.map(([hasErrors, hasFocus, touched, disabled]) => {\n    \t\t\tif (disabled) {\n    \t\t\t\treturn 'disabled';\n    \t\t\t}\n\n    \t\t\tif (!touched) {\n    \t\t\t\treturn hasFocus ? 'focus' : '';\n    \t\t\t}\n\n    \t\t\tif (hasErrors) {\n    \t\t\t\treturn 'error';\n    \t\t\t}\n\n    \t\t\tif (hasFocus) {\n    \t\t\t\treturn 'focus';\n    \t\t\t}\n\n    \t\t\treturn 'valid';\n    \t\t})\n    \t\t.uniqueNext();\n    }\n\n    public get $labelIsInsteadOfText(): Observable<boolean> {\n    \treturn Observable.all([\n    \t\tthis.formControl.$changeFocus,\n    \t\tthis.formControl.$valueChanged.map(value => Boolean(value)),\n    \t])\n    \t\t.map(([hasFocus, hasValue]) => !hasFocus && !hasValue);\n    }\n\n    public onFocus(): void {\n    \tthis.formControl.changeFocus(true);\n    }\n\n    public onBlur(): void {\n    \tthis.formControl.changeFocus(false);\n    \tthis.formControl.touch();\n    }\n\n    public onInput(event: InputEvent): void {\n    \tthis.formControl.next((event.target as HTMLInputElement).value);\n    }\n\n    public setFocusForInput(): void {\n    \tthis.input.focus();\n    }\n\n    public onAttributeChanged(\n    \tname: string,\n    \t_oldValue: string | null,\n    \tnewValue: string | null,\n    ): boolean {\n    \tswitch (name) {\n    \t\tcase 'name':\n    \t\t\tif (newValue) {\n    \t\t\t\tthis._$name.next(newValue);\n    \t\t\t} else {\n    \t\t\t\tthis._$name.next(false);\n    \t\t\t}\n\n    \t\t\tbreak;\n    \t\tdefault: break;\n    \t}\n\n    \treturn false;\n    }\n}\n\n","export const template = `\n    <form name={{$name}} @submit={{onSubmit}}>\n        <slot name=\"field\"></slot>\n        <slot name=\"submit\"></slot>\n    </form>\n`;\n","import {component, CustomHTMLElement} from '../../utils/component';\n\nimport {template} from './app-form.tmpl';\n\nimport './app-form.less';\nimport {FormGroup} from '../../utils/form/form-group';\nimport {Observable} from '../../utils/observeble/observeble';\nimport {Subject} from '../../utils/observeble/subject';\n\n@component({\n\tname: 'app-form',\n\ttemplate,\n\tobservedAttributes: ['name'],\n})\nexport class AppForm implements CustomHTMLElement {\n    private _$name: Subject<string | boolean> = new Subject<string | boolean>();\n    public formGroup: FormGroup<{}> | undefined;\n\n    public get $name(): Observable<string | boolean> {\n    \treturn this._$name.asObserveble();\n    }\n\n    public onSubmit(event: Event): void {\n    \tevent.preventDefault();\n\n    \tif (!this.formGroup) {\n    \t\treturn;\n    \t}\n\n    \tObservable.all([this.formGroup.$isValid, this.formGroup.$valueChanged])\n    \t\t.only(1)\n    \t\t.filter(([isValid]) => Boolean(isValid))\n    \t\t.on(args => this.formGroup?.submit(args[1]));\n    }\n\n    public onAttributeChanged(\n    \tname: string,\n    \t_oldValue: string | null,\n    \tnewValue: string | null,\n    ): boolean {\n    \tswitch (name) {\n    \t\tcase 'name':\n    \t\t\tif (newValue) {\n    \t\t\t\tthis._$name.next(newValue);\n    \t\t\t} else {\n    \t\t\t\tthis._$name.next(false);\n    \t\t\t}\n\n    \t\t\tbreak;\n    \t\tdefault: break;\n    \t}\n\n    \treturn false;\n    }\n}\n","export const template = `\n    <button button-disabled={{$disabled}}>\n        <slot name=\"label\"></slot>\n    </button>\n`;\n","import {component, CustomHTMLElement} from '../../utils/component';\n\nimport {template} from './app-button.tmpl';\n\nimport './app-button.less';\nimport {Subject} from '../../utils/observeble/subject';\nimport {Observable} from '../../utils/observeble/observeble';\n\n@component({\n\tname: 'app-button',\n\ttemplate,\n\tobservedAttributes: ['disabled'],\n})\nexport class AppButton implements CustomHTMLElement {\n    private disabled: Subject<boolean> = new Subject<boolean>(false);\n    private _disabled: boolean = false;\n\n    get $disabled(): Observable<boolean> {\n    \treturn this.disabled.asObserveble();\n    }\n\n    public onRendered(element: HTMLElement): void {\n    \telement.querySelector('button')!.addEventListener('click', event => {\n    \t\tif (this._disabled) {\n    \t\t\tevent.stopPropagation();\n\n    \t\t\telement.dispatchEvent(new CustomEvent('disabledclick'));\n    \t\t}\n    \t});\n    }\n\n    public onAttributeChanged(name: string, _: string | null, newValue: string | null): boolean {\n    \tswitch (name) {\n    \t\tcase 'disabled':\n    \t\t\tthis._disabled = newValue !== null;\n    \t\t\tthis.disabled.next(newValue !== null);\n\n    \t\t\treturn true;\n    \t\tdefault: return false;\n    \t}\n    }\n}\n","export enum authPageType {\n    registration = 'registration',\n}\n","\nimport {authorizationData, registrationData} from '../../../service/api/modules/auth-http-client-module';\nimport {AuthService} from '../../../service/auth.service';\nimport {pages} from '../../../service/router/pages.config';\nimport {RouterService} from '../../../service/router/router.service';\nimport {Observable} from '../../../utils/observeble/observeble';\nimport {authPageType} from '../enums/auth-page-type.enum';\n\ntype authPageQueryParams = {\n    type?: authPageType,\n}\n\nlet instance: AuthPageManager;\n\nexport class AuthPageManager {\n    private readonly routerService: RouterService<authPageQueryParams>;\n    private readonly authService: AuthService;\n\n    constructor() {\n    \tif (instance) {\n    \t\treturn instance;\n    \t}\n\n    \tinstance = this;\n\n    \tthis.routerService = new RouterService();\n    \tthis.authService = new AuthService();\n    }\n\n    public get $isRegistration(): Observable<boolean> {\n    \treturn this.routerService.$queryParams.map(query =>\n    \t\tquery.type === authPageType.registration,\n    \t);\n    }\n\n    public navigateToAuthorization(): void {\n    \tthis.routerService.navigateTo(pages.auth, {type: authPageType.registration});\n    }\n\n    public navigateToRegistration(): void {\n    \tthis.routerService.navigateTo(pages.auth);\n    }\n\n    public authorization(authData: authorizationData): void {\n    \tthis.authService.authorization(authData)\n    \t\t.then(() => this.navigateToChats());\n    }\n\n    public registration(registrationData: registrationData): void {\n    \tthis.authService.registration(registrationData)\n    \t\t.then(() => this.navigateToChats());\n    }\n\n    private navigateToChats(): void {\n    \tthis.routerService.navigateTo(pages.chats);\n    }\n}\n","export enum authPageFormTitle {\n\tregistration = 'Регистрация',\n\tauthorization = 'Вход',\n}\n","import {template} from './page-auth.tmpl';\n\nimport {Observable} from '../../utils/observeble/observeble';\nimport {FormGroup} from '../../utils/form/form-group';\nimport {component, CustomHTMLElement} from '../../utils/component';\n\nimport {formValidators} from '../../const/form-validators';\n\nimport '../../components/input/app-input';\nimport '../../components/form/app-form';\nimport '../../components/button/app-button';\n\nimport './page-auth.less';\nimport {Subscription} from '../../utils/observeble/subscription';\nimport {AuthPageManager} from './services/auth-page-manager';\nimport {authorizationData, registrationData} from '../../service/api/modules/auth-http-client-module';\nimport {authPageFormTitle} from './enums/form-title.enum';\n\n@component({\n\tname: 'page-auth',\n\ttemplate,\n})\nexport class PageAuth implements CustomHTMLElement {\n    public readonly authForm = new FormGroup({\n    \tcontrols: {\n        \tlogin: {validators: formValidators.login},\n    \t\tpassword: {validators: formValidators.password},\n    \t},\n    });\n\n    public readonly registrationForm = new FormGroup({\n    \tcontrols: {\n        \tfirst_name: {validators: formValidators.first_name},\n        \tsecond_name: {validators: formValidators.second_name},\n    \t\tlogin: {validators: formValidators.login},\n    \t\temail: {validators: formValidators.email},\n        \tpassword: {validators: formValidators.password},\n        \tphone: {validators: formValidators.phone},\n    \t},\n    });\n\n    private readonly authPageManager: AuthPageManager;\n\n\tprivate authorizationSubscription: Subscription<authorizationData>;\n\tprivate registrationSubscription: Subscription<registrationData>;\n\n\tconstructor() {\n\t\tthis.authPageManager = new AuthPageManager();\n\t}\n\n\tpublic onInit(): void {\n\t\tthis.authorizationSubscription = this.authForm.$submit\n\t\t\t.subscribe(formData => this.onAuthorization(formData as authorizationData));\n\t\tthis.registrationSubscription = this.registrationForm.$submit\n\t\t\t.subscribe(formData => this.onRegistration(formData as registrationData));\n\t}\n\n\tpublic onDestroy(): void {\n\t\tif (this.authorizationSubscription) {\n\t\t\tthis.authorizationSubscription.unsubscribe();\n\t\t}\n\n\t\tif (this.registrationSubscription) {\n\t\t\tthis.registrationSubscription.unsubscribe();\n\t\t}\n\t}\n\n\tpublic get $title(): Observable<string> {\n    \treturn this.$isRegistration.map(\n    \t\tisRegistration => isRegistration\n\t\t\t\t? authPageFormTitle.registration\n\t\t\t\t: authPageFormTitle.authorization,\n    \t);\n\t}\n\n\tpublic get $isRegistration(): Observable<boolean> {\n\t\treturn this.authPageManager.$isRegistration;\n\t}\n\n\tpublic get $isAuthorization(): Observable<boolean> {\n    \treturn this.$isRegistration.map(isAuthorization => !isAuthorization);\n\t}\n\n\tpublic get $isDisabledAuthorizationForm(): Observable<boolean> {\n\t\treturn this.authForm.$isValid.map(isValid => !isValid);\n\t}\n\n\tpublic get $isDisabledRegistrationForm(): Observable<boolean> {\n\t\treturn this.registrationForm.$isValid.map(isValid => !isValid);\n\t}\n\n\tpublic onDisabledClickFormAuthorization(): void {\n\t\tthis.authForm.touch();\n\t\tthis.authForm.shakingFirstInvalidField();\n\t}\n\n\tpublic onDisabledClickFormRegistration(): void {\n\t\tthis.registrationForm.touch();\n\t\tthis.registrationForm.shakingFirstInvalidField();\n\t}\n\n\tpublic navigateToAuthorization(): void {\n\t\tthis.authPageManager.navigateToAuthorization();\n\t}\n\n\tpublic navigateToRegistration(): void {\n\t\tthis.authPageManager.navigateToRegistration();\n\t}\n\n\tprivate onAuthorization(authData: authorizationData): void {\n\t\tthis.authPageManager.authorization(authData);\n\t}\n\n\tprivate onRegistration(registrationData: registrationData): void {\n\t\tthis.authPageManager.registration(registrationData);\n\t}\n}\n","export const template = `\n    <main>\n        <section id=\"label\">\n            <img alt=\"avatar\" src={{$avatar}}>\n            <h1>{{$userData.login}}</h1>\n        </section>\n\n        <section class=\"content-wrapper\">\n            <user-data class=\"content\" hidden-with-animtion={{$hideDataList}}></user-data>\n            <form-user-data class=\"content\" hidden-with-animtion={{$hideFormUserData}}></form-user-data>\n            <form-password class=\"content\" hidden-with-animtion={{$hideFormPassword}}></form-password>\n        </section>\n    </main>\n`;\n","export const template = `\n<section id=\"data-list\">\n    <dl class=\"field-list\">\n        <dt class=\"text-primary\">Почта</dt>\n        <dd class=\"text-secondary\">{{ $userData.email }}</dd>\n\n        <dt class=\"text-primary\">Логин</dt>\n        <dd class=\"text-secondary\">{{ $userData.login }}</dd>\n\n        <dt class=\"text-primary\">Имя</dt>\n        <dd class=\"text-secondary\">{{ $userData.first_name }}</dd>\n\n        <dt class=\"text-primary\">Фамилия</dt>\n        <dd class=\"text-secondary\">{{ $userData.second_name }}</dd>\n\n        <dt class=\"text-primary\">Имя в чате</dt>\n        <dd class=\"text-secondary\">{{ $userData.display_name }}</dd>\n\n        <dt class=\"text-primary\">Телефон</dt>\n        <dd class=\"text-secondary\">{{ $userData.phone }}</dd>\n    </dl>\n</section>\n\n<section id=\"footer-buttons\">\n    <div class=\"buttons\">\n        <ul class=\"field-list\">\n            <li>\n                <app-button @click={{onChangeData()}} appearance=\"secondary\">\n                    <span slot=\"label\">\n                        Изменить данные\n                    </span>\n                </app-button>\n            </li>\n            <li>\n                <app-button @click={{onChangePassword()}} appearance=\"secondary\">\n                    <span slot=\"label\">\n                        Изменить пароль\n                    </span>\n                </app-button>\n            </li>\n            <li>\n                <app-button @click={{onExit()}} appearance=\"error\">\n                    <span slot=\"label\">\n                        Выйти\n                    </span>\n                </app-button>\n            </li>\n        </ul>\n    </div>\n</section>\n`;\n","export function hideElement(element: Element): void {\n\telement.setAttribute('hidden', '');\n}\n\nexport function showElement(element: Element): void {\n\telement.removeAttribute('hidden');\n}\n","export const VISIBILITY_CONFIG = {\n\tduration: 70,\n\tscaleChange: 0.1,\n};\n","import {hideElement} from '../../functions/hide-element';\nimport {transform} from '../animation-utils/transform.functions';\nimport {AppAnimation} from '../app-animation';\nimport {VISIBILITY_CONFIG} from '../configs/visibility.config';\n\nexport class HideAnimation implements AppAnimation {\n    public readonly keyFrames: Keyframe[] = [\n    \t{opacity: 0, transform: transform.scale(1 - VISIBILITY_CONFIG.scaleChange)},\n    ];\n\n    public readonly keyframeAnimationOptions: KeyframeAnimationOptions = {\n    \tduration: VISIBILITY_CONFIG.duration,\n    };\n\n    public readonly onFinish = [hideElement];\n}\n","import {showElement} from '../../functions/hide-element';\nimport {transform} from '../animation-utils/transform.functions';\nimport {AppAnimation} from '../app-animation';\nimport {VISIBILITY_CONFIG} from '../configs/visibility.config';\n\nexport class ShowAnimation implements AppAnimation {\n    public readonly keyFrames: Keyframe[] = [\n    \t{opacity: 0, transform: transform.scale(1 + VISIBILITY_CONFIG.scaleChange)},\n    \t{opacity: 1},\n    ];\n\n    public readonly keyframeAnimationOptions: KeyframeAnimationOptions = {\n    \tduration: VISIBILITY_CONFIG.duration,\n    };\n\n    public readonly onStart = [showElement];\n}\n","import {playAnimation} from '../../../utils/animation/animation-utils/play-animation';\nimport {HideAnimation} from '../../../utils/animation/animations/hide-animation';\nimport {ShowAnimation} from '../../../utils/animation/animations/show-animation';\nimport {CustomHTMLElement} from '../../../utils/component';\nimport {hideElement, showElement} from '../../../utils/functions/hide-element';\nimport {hiddenWithAnimtionValue} from '../page-profile';\n\nenum profileContentAttributes {\n    hiddenWithAnimtion = 'hidden-with-animtion',\n}\n\nexport class ProfileContent implements CustomHTMLElement {\n    private element: HTMLElement | undefined;\n    private isInitHiddenStatus: boolean = true;\n\n    public onRendered(element: HTMLElement): void {\n    \tthis.element = element;\n    }\n\n    protected static get observedAttributes(): string[] {\n    \treturn [profileContentAttributes.hiddenWithAnimtion];\n    }\n\n    public onAttributeChanged(\n    \tname: string,\n    \t_oldValue: string | null,\n    \tnewValue: string | null,\n    ): boolean {\n    \tswitch (name) {\n    \t\tcase profileContentAttributes.hiddenWithAnimtion:\n    \t\t\tif (_oldValue === newValue) {\n    \t\t\t\treturn false;\n    \t\t\t}\n\n    \t\t\tif (!this.element) {\n    \t\t\t\treturn false;\n    \t\t\t}\n\n    \t\t\tif (this.isInitHiddenStatus) {\n    \t\t\t\tthis.isInitHiddenStatus = false;\n    \t\t\t\tif (newValue === hiddenWithAnimtionValue.false) {\n    \t\t\t\t\tshowElement(this.element);\n    \t\t\t\t} else {\n    \t\t\t\t\thideElement(this.element);\n    \t\t\t\t}\n\n    \t\t\t\treturn false;\n    \t\t\t}\n\n    \t\t\tif (newValue === hiddenWithAnimtionValue.false) {\n    \t\t\t\tthis.show(this.element);\n    \t\t\t} else {\n    \t\t\t\tthis.hide(this.element);\n    \t\t\t}\n\n    \t\t\treturn false;\n    \t\tdefault: return false;\n    \t}\n    }\n\n    private hide(element: HTMLElement): void {\n    \tplayAnimation(element, new HideAnimation());\n    }\n\n    private show(element: HTMLElement): void {\n    \tplayAnimation(element, new ShowAnimation());\n    }\n}\n","import {userActionType} from '../enums/user-action-type.enum';\nimport {Action} from '../interfaces/action.interface';\nimport {userData} from '../interfaces/authorization-state.interface';\nimport {changePassword} from '../interfaces/user-state.interface';\n\nexport class UploadChangeUserDataAction implements Action {\n    public readonly type = userActionType.changeUserDataUpload;\n}\n\nexport class UploadedChangeUserDataAction implements Action {\n    public readonly type = userActionType.changeUserDataUploaded;\n    public readonly payload: userData;\n\n    constructor(newUserData: userData) {\n    \tthis.payload = newUserData;\n    }\n}\n\nexport class UploadErrorChangeUserDataAction implements Action {\n    public readonly type = userActionType.changeUserDataUploadError;\n    public readonly payload: Error;\n\n    constructor(error: Error) {\n    \tthis.payload = error;\n    }\n}\n\nexport class UploadChangePasswordAction implements Action {\n    public readonly type = userActionType.changePasswordUpload;\n}\n\nexport class UploadedChangePasswordAction implements Action {\n    public readonly type = userActionType.changePasswordUploaded;\n    public readonly payload: changePassword;\n}\n\nexport class UploadErrorChangePasswordAction implements Action {\n    public readonly type = userActionType.changePasswordUploadError;\n    public readonly payload: Error;\n\n    constructor(error: Error) {\n    \tthis.payload = error;\n    }\n}\n","import {UploadChangePasswordAction,\n\tUploadChangeUserDataAction,\n\tUploadedChangePasswordAction,\n\tUploadedChangeUserDataAction,\n\tUploadErrorChangePasswordAction,\n\tUploadErrorChangeUserDataAction} from '../store/actions/user.actions';\nimport {Store} from '../store/store';\nimport {HTTPClientFacade} from './api/http-client.facade';\nimport {changePasswordData, changeUserData} from './api/modules/user-http-client-module';\n\nlet instance: UserService;\n\nexport class UserService {\n    private readonly httpClientFacade: HTTPClientFacade;\n    private readonly store: Store;\n\n    constructor() {\n    \tif (instance) {\n    \t\treturn instance;\n    \t}\n\n    \tinstance = this;\n\n    \tthis.httpClientFacade = new HTTPClientFacade();\n    \tthis.store = new Store();\n    }\n\n    public changeUserData(data: changeUserData): Promise<void> {\n    \tthis.store.dispatch(new UploadChangeUserDataAction());\n\n    \treturn this.httpClientFacade.user.changeData(data)\n    \t\t.then(response => this.store.dispatch(new UploadedChangeUserDataAction(response.body)))\n    \t\t.catch(error => {\n    \t\t\tthis.store.dispatch(new UploadErrorChangeUserDataAction(error));\n\n    \t\t\tthrow error;\n    \t\t});\n    }\n\n    public changePassword(data: changePasswordData): Promise<void> {\n    \tthis.store.dispatch(new UploadChangePasswordAction());\n\n    \treturn this.httpClientFacade.user.changePassword(data)\n    \t\t.then(() => this.store.dispatch(new UploadedChangePasswordAction()))\n    \t\t.catch(error => {\n    \t\t\tthis.store.dispatch(new UploadErrorChangePasswordAction(error));\n\n    \t\t\tthrow error;\n    \t\t});\n    }\n}\n","import {Data} from '../../interfaces/data.interface';\n\nexport function selectDataValue<T>(data: Data<T>): T | undefined {\n\treturn data.value;\n}\n","export enum profilePageFormType {\n    changeData = 'changeData',\n\tchangePassword = 'changePassword',\n}\n","import {changePasswordData} from '../../../service/api/modules/user-http-client-module';\nimport {AuthService} from '../../../service/auth.service';\nimport {pages} from '../../../service/router/pages.config';\nimport {RouterService} from '../../../service/router/router.service';\nimport {UserService} from '../../../service/user.service';\nimport {userData} from '../../../store/interfaces/authorization-state.interface';\nimport {selectUserData} from '../../../store/selectors/authorization/select-user-data';\nimport {selectDataValue} from '../../../store/selectors/data/select-data-value';\nimport {Store} from '../../../store/store';\nimport {Observable} from '../../../utils/observeble/observeble';\nimport {profilePageFormType} from '../enums/profile-page-form-type.enum';\n\n// @ts-ignore\nimport defaultUserAvatarUrl from '../../../resources/img/default_avatar.png';\n\nexport const DEFAULT_USER_AVATAR_URL = defaultUserAvatarUrl;\n\nexport enum profilePageContent {\n\tuserData,\n\tformUserData,\n\tformPassword,\n}\n\ntype profilePageQueryParams = {\n    form?: profilePageFormType,\n}\n\nlet instance: ProfilePageManager;\n\nexport class ProfilePageManager {\n\tprivate readonly routerService: RouterService<profilePageQueryParams>;\n\tprivate readonly authService: AuthService;\n\tprivate readonly userService: UserService;\n\tprivate readonly store: Store;\n\n\tconstructor() {\n\t\tif (instance) {\n\t\t\treturn instance;\n\t\t}\n\n\t\tinstance = this;\n\n\t\tthis.authService = new AuthService();\n\t\tthis.userService = new UserService();\n\t\tthis.routerService = new RouterService();\n\t\tthis.store = new Store();\n\t}\n\n\tpublic get $userData(): Observable<userData> {\n\t\treturn this.store.$state\n\t\t\t.select(selectUserData)\n\t\t\t.select(selectDataValue)\n\t\t\t.filter(userData => Boolean(userData)) as Observable<userData>;\n\t}\n\n\tpublic get $profilePageContent(): Observable<profilePageContent> {\n\t\treturn this.routerService.$queryParams\n\t\t\t.map(query => {\n\t\t\t\tswitch (query.form) {\n\t\t\t\t\tcase profilePageFormType.changeData:\n\t\t\t\t\t\treturn profilePageContent.formUserData;\n\t\t\t\t\tcase profilePageFormType.changePassword:\n\t\t\t\t\t\treturn profilePageContent.formPassword;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn profilePageContent.userData;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.uniqueNext();\n\t}\n\n\tpublic uploadUserData(): void {\n\t\tthis.authService.uploadUserDataIfNot();\n\t}\n\n\tpublic changeData(changeUserData: userData): void {\n\t\tthis.userService.changeUserData(changeUserData);\n\t}\n\n\tpublic changePassword(passwordsData: changePasswordData): void {\n\t\tthis.userService.changePassword(passwordsData);\n\t}\n\n\tpublic goToUserData(): void {\n\t\tthis.routerService.navigateTo(pages.profile);\n\t}\n\n\tpublic goToFormData(): void {\n\t\tthis.routerService.navigateTo(pages.profile, {form: profilePageFormType.changeData});\n\t}\n\n\tpublic goToFormPassword(): void {\n\t\tthis.routerService.navigateTo(pages.profile, {form: profilePageFormType.changePassword});\n\t}\n\n\tpublic goToChats(): void {\n\t\tthis.routerService.navigateTo(pages.chats);\n\t}\n}\n","import {component} from '../../../../utils/component';\n\nimport {template} from './user-data.tmpl';\n\nimport './user-data.less';\nimport {ProfileContent} from '../../elements/profile-content';\nimport {userData} from '../../../../store/interfaces/authorization-state.interface';\nimport {ProfilePageManager} from '../../service/profile-page-manager';\nimport {Observable} from '../../../../utils/observeble/observeble';\n\n// @ts-ignore\n@component({\n\tname: 'user-data',\n\ttemplate,\n})\nexport class UserData extends ProfileContent {\n        private readonly profilePageManager: ProfilePageManager;\n\n        constructor() {\n        \tsuper();\n\n        \tthis.profilePageManager = new ProfilePageManager();\n        }\n\n        static get observedAttributes(): string[] {\n        \treturn super.observedAttributes;\n        }\n\n        public onInit(): void {\n        }\n\n        public get $userData(): Observable<userData> {\n        \treturn this.profilePageManager.$userData;\n        }\n\n        public onChangeData(): void {\n        \tthis.profilePageManager.goToFormData();\n        }\n\n        public onChangePassword(): void {\n        \tthis.profilePageManager.goToFormPassword();\n        }\n\n        public onExit(): void {\n        \tthis.profilePageManager.goToChats();\n        }\n}\n","export const template = `\n<section>\n    <app-form name=\"user_data\">\n        <app-input slot=\"field\" formControl=[[form.controls.email]]>\n            <span slot=\"label\">Почта</span>\n        </app-input>\n        <app-input slot=\"field\" formControl=[[form.controls.login]]>\n            <span slot=\"label\">Логин</span>    \n        </app-input>\n        <app-input slot=\"field\" formControl=[[form.controls.first_name]]>\n            <span slot=\"label\">Имя</span>\n        </app-input>\n        <app-input slot=\"field\" formControl=[[form.controls.second_name]]>\n            <span slot=\"label\">Фамилия</span>\n        </app-input>\n        <app-input slot=\"field\" formControl=[[form.controls.display_name]]>\n            <span slot=\"label\">Имя в чате</span>\n        </app-input>\n        <app-input slot=\"field\" formControl=[[form.controls.phone]]>\n            <span slot=\"label\">Телефон</span>\n        </app-input>\n    </app-form>\n</section>\n\n<section id=\"footer-buttons\">\n    <div class=\"buttons\">\n        <ul class=\"field-list\">\n            <li>\n                <app-button @click={{onChangeData()}} @disabledclick={{onDisabledClick()}} disabled={{$isInvalidForm}} onDisabledClick appearance=\"primary\">\n                    <span slot=\"label\">\n                        Сохранить\n                    </span>\n                </app-button>\n            </li>\n            <li>\n                <app-button @click={{onBack()}} appearance=\"error\">\n                    <span slot=\"label\">\n                        Назад\n                    </span>\n                </app-button>\n            </li>\n        </ul>\n    </div>\n</section>\n`;\n","import {component} from '../../../../utils/component';\n\nimport {template} from './form-user-data.tmpl';\n\nimport '../../../../components/form/app-form';\nimport '../../../../components/input/app-input';\nimport '../../../../components/button/app-button';\n\nimport './form-user-data.less';\nimport {FormGroup} from '../../../../utils/form/form-group';\nimport {Observable} from '../../../../utils/observeble/observeble';\nimport {formValidators} from '../../../../const/form-validators';\nimport {ProfileContent} from '../../elements/profile-content';\nimport {ProfilePageManager} from '../../service/profile-page-manager';\nimport {Subscription} from '../../../../utils/observeble/subscription';\nimport {userData} from '../../../../store/interfaces/authorization-state.interface';\n\n// @ts-ignore\n@component({\n\tname: 'form-user-data',\n\ttemplate,\n})\nexport class FormUserData extends ProfileContent {\n    public readonly form = new FormGroup({\n    \tcontrols: {\n        \temail: {validators: formValidators.email},\n        \tlogin: {validators: formValidators.login},\n    \t\tfirst_name: {validators: formValidators.first_name},\n    \t\tsecond_name: {validators: formValidators.second_name},\n        \tdisplay_name: {validators: formValidators.display_name},\n        \tphone: {validators: formValidators.phone},\n    \t},\n    });\n\n\tprivate readonly profilePageManager: ProfilePageManager;\n\n\tprivate userDataSubscription: Subscription<userData>;\n\n\tconstructor() {\n\t\tsuper();\n\n    \tthis.profilePageManager = new ProfilePageManager();\n\t}\n\n\tpublic onInit(): void {\n\t\tthis.userDataSubscription = this.profilePageManager.$userData\n\t\t\t.subscribe(userData => this.form.next(userData));\n\t}\n\n\tpublic onDestroy(): void {\n\t\tthis.userDataSubscription.unsubscribe();\n\t}\n\n\tpublic get $isInvalidForm(): Observable<boolean> {\n    \treturn this.form.$isValid.map(isValid => !isValid);\n\t}\n\n\tstatic get observedAttributes(): string[] {\n\t\treturn super.observedAttributes;\n\t}\n\n\tpublic onBack(): void {\n    \tthis.profilePageManager.goToUserData();\n\t}\n\n\tpublic onChangeData(): void {\n    \tthis.profilePageManager.changeData(this.form.value as userData);\n\t}\n\n\tpublic onDisabledClick(): void {\n    \tthis.form.touch();\n\t\tthis.form.shakingFirstInvalidField();\n\t}\n}\n","export const template = `\n<section>\n    <app-form name=\"password\">\n        <app-input slot=\"field\" formControl=[[form.controls.oldPassword]]>\n            <span slot=\"label\">Старый пароль</span>\n        </app-input>\n        <app-input slot=\"field\" formControl=[[form.controls.newPassword]]>\n            <span slot=\"label\">Новый пароль</span>    \n        </app-input>\n        <app-input slot=\"field\" formControl=[[form.controls.repeatPassword]]>\n            <span slot=\"label\">Повторите пароль</span>\n        </app-input>\n    </app-form>\n</section>\n\n<section id=\"footer-buttons\">\n    <div class=\"buttons\">\n        <ul class=\"field-list\">\n            <li>\n                <app-button @click={{onChangePassword()}} @disabledclick={{onDisabledClick()}} disabled={{$isInvalidForm}} appearance=\"primary\">\n                    <span slot=\"label\">\n                        Сохранить\n                    </span>\n                </app-button>\n            </li>\n            <li>\n                <app-button @click={{onBack()}} appearance=\"error\">\n                    <span slot=\"label\">\n                        Назад\n                    </span>\n                </app-button>\n            </li>\n        </ul>\n    </div>\n</section>\n`;\n","import {FormGroup} from '../../../../utils/form/form-group';\nimport {Observable} from '../../../../utils/observeble/observeble';\nimport {component} from '../../../../utils/component';\n\nimport {formValidators} from '../../../../const/form-validators';\n\nimport {template} from './form-password.tmpl';\n\nimport './form-password.less';\nimport {ProfileContent} from '../../elements/profile-content';\nimport {ValidatorError} from '../../../../utils/form/validator-error';\nimport {ProfilePageManager} from '../../service/profile-page-manager';\nimport {changePasswordData} from '../../../../service/api/modules/user-http-client-module';\n\n// @ts-ignore никак не могу написать типы для component (\n@component({\n\tname: 'form-password',\n\ttemplate,\n})\nexport class FormPassword extends ProfileContent {\n        public readonly form = new FormGroup({\n        \tcontrols: {\n        \t\toldPassword: {validators: formValidators.password},\n        \t\tnewPassword: {validators: formValidators.password},\n        \t\trepeatPassword: {validators: formValidators.password},\n        \t},\n        \tfieldValidators: [\n        \t\t{\n        \t\t\ttargets: ['repeatPassword'],\n        \t\t\tvalidators: [\n        \t\t\t\t({newPassword, repeatPassword}) => newPassword === repeatPassword\n        \t\t\t\t\t? null\n        \t\t\t\t\t: new ValidatorError('Пароли не совпадают'),\n        \t\t\t],\n        \t\t},\n        \t\t{\n        \t\t\ttargets: ['repeatPassword'],\n        \t\t\tvalidators: [\n        \t\t\t\t({oldPassword, repeatPassword}) => oldPassword === repeatPassword\n        \t\t\t\t\t? new ValidatorError('Новый пароль не отличается от старого')\n        \t\t\t\t\t: null,\n        \t\t\t],\n        \t\t},\n        \t\t{\n        \t\t\ttargets: ['newPassword'],\n        \t\t\tvalidators: [\n        \t\t\t\t({oldPassword, newPassword}) => oldPassword === newPassword\n        \t\t\t\t\t? new ValidatorError('Новый пароль не отличается от старого')\n        \t\t\t\t\t: null,\n        \t\t\t],\n        \t\t},\n        \t],\n        });\n\n        private readonly profilePageManager: ProfilePageManager;\n\n        constructor() {\n        \tsuper();\n\n        \tthis.profilePageManager = new ProfilePageManager();\n        }\n\n        static get observedAttributes(): string[] {\n        \treturn super.observedAttributes;\n        }\n\n        public get $isInvalidForm(): Observable<boolean> {\n        \treturn this.form.$isValid.map(isValid => !isValid);\n        }\n\n        public onBack(): void {\n        \tthis.profilePageManager.goToUserData();\n        }\n\n        public onChangePassword(): void {\n        \tthis.profilePageManager.changePassword(this.getChangePasswordData());\n        }\n\n        public onDisabledClick(): void {\n        \tthis.form.touch();\n        \tthis.form.shakingFirstInvalidField();\n        }\n\n        private getChangePasswordData(): changePasswordData {\n        \tconst {newPassword, oldPassword} = this.form.value;\n\n        \treturn {newPassword, oldPassword} as changePasswordData;\n        }\n}\n","import {component, CustomHTMLElement} from '../../utils/component';\n\nimport {template} from './page-profile.tmpl';\n\nimport '../../components/button/app-button';\n\nimport './components/user-data/user-data';\nimport './components/form-user-data/form-user-data';\nimport './components/form-password/form-password';\n\nimport './page-profile.less';\nimport {Observable} from '../../utils/observeble/observeble';\nimport {DEFAULT_USER_AVATAR_URL, profilePageContent, ProfilePageManager} from './service/profile-page-manager';\nimport {AuthGuard} from '../../guards/auth-guard';\nimport {userData} from '../../store/interfaces/authorization-state.interface';\n\nexport enum hiddenWithAnimtionValue {\n    true = 'true',\n    false = 'false',\n}\n\n@component({\n\tname: 'page-profile',\n\ttemplate,\n\tguards: [AuthGuard],\n})\nexport class PageProfile implements CustomHTMLElement {\n    private readonly profilePageManager: ProfilePageManager;\n\n    constructor() {\n    \tthis.profilePageManager = new ProfilePageManager();\n    }\n\n    public onInit(): void {\n    \tthis.profilePageManager.uploadUserData();\n    }\n\n    public get $userData(): Observable<userData> {\n    \treturn this.profilePageManager.$userData;\n    }\n\n    public get $avatar(): Observable<string> {\n    \treturn this.$userData.map(userData => userData.avatarUrl || DEFAULT_USER_AVATAR_URL);\n    }\n\n    // Костыльно, но мы ограничены возможностями шаблонзатора\n    public get $hideDataList(): Observable<hiddenWithAnimtionValue> {\n    \treturn this.$getIsHideContent(profilePageContent.userData);\n    }\n\n    public get $hideFormPassword(): Observable<hiddenWithAnimtionValue> {\n    \treturn this.$getIsHideContent(profilePageContent.formPassword);\n    }\n\n    public get $hideFormUserData(): Observable<hiddenWithAnimtionValue> {\n    \treturn this.$getIsHideContent(profilePageContent.formUserData);\n    }\n\n    private $getIsHideContent(content: profilePageContent): Observable<hiddenWithAnimtionValue> {\n    \treturn this.profilePageManager.$profilePageContent\n    \t\t.map(pageContent =>\n    \t\t\tpageContent === content\n    \t\t\t\t? hiddenWithAnimtionValue.false\n    \t\t\t\t: hiddenWithAnimtionValue.true,\n    \t\t);\n    }\n}\n","export const defaultDescription = 'Кажется, что-то пошло не так :(';\n","export const template = `\n    <main>\n        <h1 id=\"title\">{{ code }}</h1>\n        <p id=\"description\">{{ description }}</p>\n        <app-button id=\"back\" appearance=\"secondary\" @click={{navigateToChats()}}>\n            <span slot=\"label\">Назад к чатам</span>\n        </app-button>\n    </main>\n`;\n","import {component, CustomHTMLElement} from '../../utils/component';\nimport {RouterService} from '../../service/router/router.service';\nimport {defaultDescription} from './consts/default-description.const';\n\nimport '../../components/input/app-input';\nimport '../../components/button/app-button';\n\nimport {pages} from '../../service/router/pages.config';\nimport {template} from './page-default.tmpl';\n\nimport './page-default.less';\n\ntype defaultPageQueryParams = {\n\tcode?: string,\n}\n\n@component({\n\tname: 'page-default',\n\ttemplate,\n})\nexport class PageDefault implements CustomHTMLElement {\n        public code: number;\n        public routerService: RouterService<defaultPageQueryParams>;\n\n        constructor() {\n        \tthis.routerService = new RouterService<defaultPageQueryParams>();\n        }\n\n        public onInit(): void {\n        \tthis.code = Number(this.routerService.urlParams.queryParams.code) || 404;\n        }\n\n        public get description(): string {\n        \treturn this.getDescriptionByCode(this.code)\n                || this.getDescriptionByCode(this.floorToHundreds(this.code))\n                || defaultDescription;\n        }\n\n        public navigateToChats(): void {\n        \tthis.routerService.navigateTo(pages.chats);\n        }\n\n        public getDescriptionByCode(code: number): string | undefined {\n        \tswitch (code) {\n        \t\tcase 404: return 'Не туда попали';\n        \t\tcase 500: return 'Мы уже фиксим';\n        \t\tdefault: return undefined;\n        \t}\n        }\n\n        public floorToHundreds(number: number): number {\n        \treturn Math.floor(number / 100) * 100;\n        }\n}\n","import {PageMain} from '../../pages/main/page-main';\nimport {PageAuth} from '../../pages/auth/page-auth';\nimport {PageProfile} from '../../pages/profile/page-profile';\nimport {PageDefault} from '../../pages/default/page-default';\nimport {pages} from './pages.config';\n\n// TODO: Суперсущность. Если будут роуты второго+ порядка, то стоит декомпозировать\nexport type HTMLPage = PageMain | PageAuth | PageProfile | PageDefault;\nexport type HTMLPageConstructor = new () => HTMLPage;\n\nexport const routerConfig: Record<pages, HTMLPageConstructor> = {\n\t[pages.main]: PageMain,\n\t[pages.auth]: PageAuth,\n\t[pages.profile]: PageProfile,\n\t[pages.default]: PageDefault,\n};\n","import {HTMLPageConstructor, routerConfig} from './router.config';\nimport {pages} from './pages.config';\nimport {Subject} from '../../utils/observeble/subject';\nimport {Observable} from '../../utils/observeble/observeble';\n\nlet instance: RouterService<{}>;\n\nexport interface urlParams<Query> {\n    pathname: string;\n    hash: string;\n    queryParams: Query;\n}\n\nexport class RouterService<Query extends {[key: string]: string}> {\n    private readonly _popstate = new Subject<urlParams<Query>>();\n\n    constructor() {\n    \tif (instance) {\n    \t\treturn instance as RouterService<Query>;\n    \t}\n\n    \tinstance = this as RouterService<{}>;\n\n    \tObservable.event(window, 'popstate').subscribe(() => this.onPopState());\n    }\n\n    public get config(): Record<pages, HTMLPageConstructor> {\n    \treturn routerConfig;\n    }\n\n    public get $popstate(): Observable<urlParams<Query>> {\n    \treturn this._popstate.asObserveble();\n    }\n\n    public get $path(): Observable<string> {\n    \treturn this.$popstate\n    \t\t.map(urlParams => urlParams.pathname)\n    \t\t.startWith(this.urlParams.pathname)\n    \t\t.uniqueNext();\n    }\n\n    public get $queryParams(): Observable<Query> {\n    \treturn this.$popstate\n    \t\t.map(urlParams => urlParams.queryParams)\n    \t\t.uniqueNext(false, this.hasQueryParamsDiff)\n    \t\t.startWith(this.urlParams.queryParams);\n    }\n\n    public get urlParams(): urlParams<Query> {\n    \tlet {hash, pathname, search} = window.location;\n    \tconst queryParams = (search.match(/[^?&]*/g) || [])\n    \t\t.filter(value => value)\n    \t\t.reduce((out, str) => {\n    \t\t\tconst param: string[] = str.split('=');\n\n    \t\t\tif (param[1]) {\n    \t\t\t\t// @ts-ignore\n    \t\t\t\tout[param[0]] = param[1];\n    \t\t\t}\n\n    \t\t\treturn out;\n    \t\t}, {}) as Query;\n\n    \thash = hash.replace('#', '');\n\n    \treturn {hash, pathname, queryParams};\n    }\n\n    // TODO нужно переходить на url не перезагружая страницу history.pushState\n    public navigateTo(path: string = pages.main, query: Query = {} as Query, hash: string = ''): void {\n    \tlet queryStr = '';\n\n    \tif (path[0] !== '/') {\n    \t\tpath = `/${path}`;\n    \t}\n\n    \tif (Object.keys(query).length !== 0) {\n    \t\tqueryStr = '?' + Object.keys(query).map(key => `${key}=${query[key]}`).join('&');\n    \t}\n\n    \tif (hash && hash[0] !== '#') {\n    \t\thash = `#${hash}`;\n    \t}\n\n    \thistory.pushState({}, 'page', `${window.location.origin}${path}${queryStr}${hash}`);\n    \tthis.emitUrl(path, query, hash);\n    }\n\n    public getPageByPath(path: string = pages.main): HTMLPageConstructor {\n    \tpath = path.split('?')[0];\n\n    \tif (path[path.length - 1] === '/' && path.length > 1) {\n    \t\tpath = path.slice(0, -1);\n    \t}\n\n    \tif (path[0] !== '/') {\n    \t\tpath = `/${path}`;\n    \t}\n\n    \treturn this.config[path as pages] || this.config[pages.default];\n    }\n\n    public getPage(): HTMLPageConstructor {\n    \treturn this.getPageByPath(this.urlParams.pathname);\n    }\n\n    private onPopState(): void {\n    \tthis._popstate.next(this.urlParams);\n    }\n\n    private emitUrl(\n\t\tpathname: string = pages.main,\n\t\tqueryParams: Query = {} as Query,\n\t\thash: string = '',\n\t): void {\n    \tif (pathname[0] !== '/') {\n    \t\tpathname = `/${pathname}`;\n    \t}\n\n    \thash = hash.replace('#', '');\n\n    \tthis._popstate.next({pathname, queryParams, hash});\n    }\n\n    private hasQueryParamsDiff(last: Query, next: Query): boolean {\n    \tif (!last) {\n    \t\treturn true;\n    \t}\n\n    \tif (Object.keys(last).length !== Object.keys(next).length) {\n    \t\treturn true;\n    \t}\n\n    \tfor (const key in last) {\n    \t\tif (last[key] !== next[key]) {\n    \t\t\treturn true;\n    \t\t}\n    \t}\n\n    \treturn false;\n    }\n}\n","// For async/await\nimport 'regenerator-runtime/runtime';\n\nimport {component, CustomHTMLElement} from './utils/component';\nimport {template} from './app-root.tmpl';\nimport {RouterService} from './service/router/router.service';\nimport {Observable} from './utils/observeble/observeble';\n\nimport {HTMLPageConstructor} from './service/router/router.config';\n\nimport './app-root.less';\n\n@component({\n\tname: 'app-root',\n\ttemplate,\n\n})\nexport class AppRoot implements CustomHTMLElement {\n    private readonly router: RouterService<{}>;\n\n    constructor() {\n    \tthis.router = new RouterService();\n    }\n\n    public onInit(): void {}\n\n    public get content(): Observable<HTMLElement[]> {\n    \treturn this.router.$path\n    \t\t.map(pathname => this.router.getPageByPath(pathname))\n    \t\t// TODO: Проблема с типизацией. HTMLPage !== HTMLElement (\n    \t\t.map(\n    \t\t\t(constructor: HTMLPageConstructor) => [new constructor() as unknown as HTMLElement],\n    \t\t);\n    }\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}